/*! For license information please see aliyun-interaction-sdk.mini.esm.js.LICENSE.txt */
var t=uni||wx,e=a&&a.sessionStorage?a.sessionStorage:{setItem:function(e,n){void 0!==t?t.setStorageSync(e,n):"undefined"!=typeof my&&my.setStorageSync({key:e,data:n})},getItem:function(e){var n=void 0;return void 0!==t?n=t.getStorageSync(e):"undefined"!=typeof my&&(n=my.getStorageSync({key:e}).data),n}},n=a&&a.localStorage?a.localStorage:{setItem:function(e,n){void 0!==t?t.setStorageSync(e,n):"undefined"!=typeof my&&my.setStorageSync({key:e,data:n})},getItem:function(e){var n=void 0;return void 0!==t?n=t.getStorageSync(e):"undefined"!=typeof my&&(n=my.getStorageSync({key:e}).data),n}};function r(...e){const n=this;this.url=e[0]||"",this.options=e[2]||{},"undefined"!=typeof my?(my.connectSocket({url:this.url,...this.options,success:t=>{console.log("connect success: "),console.log(t)},fail:t=>{console.log("connect fail"),console.log(t)}}),my.onSocketClose((t=>{console.log("my onSocketClose"),console.log(t),n.onclose&&n.onclose({reason:t})})),my.onSocketMessage((t=>{n.onmessage&&n.onmessage(t)})),my.onSocketError((t=>{console.log("my onSocketError"),console.log(t),n.onerror&&this.onerror(t)})),my.onSocketOpen((()=>{console.log("my SocketOpen"),n.onopen&&n.onopen()}))):void 0!==t&&(this.SocketTask=t.connectSocket({url:this.url,...this.options,success:()=>{}}),this.SocketTask.onClose(((t,e)=>{n.onclose&&n.onclose({code:t,reason:e})})),this.SocketTask.onMessage((t=>{n.onmessage&&n.onmessage(t)})),this.SocketTask.onError((t=>{n.onerror&&n.onerror(t)})),this.SocketTask.onOpen((()=>{n.onopen&&n.onopen()})))}r.prototype.close=function(){"undefined"!=typeof my?my.closeSocket():void 0!==t&&this.SocketTask&&this.SocketTask.close()},r.prototype.send=function(e){"undefined"!=typeof my?my.sendSocketMessage({data:e}):void 0!==t&&this.SocketTask&&this.SocketTask.send({data:e})};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=u||function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!o.test(t))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");t+="==".slice(2-(3&t.length));for(var e,n,r,u="",s=0;s<t.length;)e=i.indexOf(t.charAt(s++))<<18|i.indexOf(t.charAt(s++))<<12|(n=i.indexOf(t.charAt(s++)))<<6|(r=i.indexOf(t.charAt(s++))),u+=64===n?String.fromCharCode(e>>16&255):64===r?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return u},s=s||{userAgent:"Language/zh_CN MicroMessenger/6.6.1.1220(0x26060135) NetType/4G Language/zh_CN miniProgram"},a=a||{WebSocket:r,navigator:s,atob:u,sessionStorage:e,localStorage:n},c=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};c.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){const e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},c.prototype.init_by_array=function(t,e){let n,r,i;for(this.init_seed(19650218),n=1,r=0,i=this.N>e?this.N:e;i;i--){const i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+t[r]+r,this.mt[n]>>>=0,n++,r++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=e&&(r=0)}for(i=this.N-1;i;i--){const t=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&t)>>>16)<<16)+1566083941*(65535&t))-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},c.prototype.random_int=function(){let t;const e=[0,this.MATRIX_A];if(this.mti>=this.N){let n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^e[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0},c.prototype.random=function(){return this.random_int()*(1/4294967296)};const f=new c(Math.random()*Number.MAX_SAFE_INTEGER);var l=a&&a.crypto?a.crypto:{getRandomValues(t){let e=t.length;for(;e--;)t[e]=Math.floor(256*f.random());return t}},h={889:(t,e,n)=>{var r=n(48);function i(t,e,n){t.byteLength;for(var r=0,i=n.length;r<i;r++){var o=n.charCodeAt(r);if(o<128)t.setUint8(e++,o>>>0&127|0);else if(o<2048)t.setUint8(e++,o>>>6&31|192),t.setUint8(e++,o>>>0&63|128);else if(o<65536)t.setUint8(e++,o>>>12&15|224),t.setUint8(e++,o>>>6&63|128),t.setUint8(e++,o>>>0&63|128);else{if(!(o<1114112))throw new Error("bad codepoint "+o);t.setUint8(e++,o>>>18&7|240),t.setUint8(e++,o>>>12&63|128),t.setUint8(e++,o>>>6&63|128),t.setUint8(e++,o>>>0&63|128)}}}function o(t,e,n){var i="",o=t.buffer.slice(e,e+n);if(void 0!==o){if("undefined"!=typeof TextDecoder)try{i=new TextDecoder("utf-8",{fatal:!0}).decode(o)}catch(t){}if(""===i)try{i=new r.TextDecoder("utf-8",{fatal:!0}).decode(o)}catch(t){}}return i||o}function u(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);if(i<128)e+=1;else if(i<2048)e+=2;else if(i<65536)e+=3;else{if(!(i<1114112))throw new Error("bad codepoint "+i);e+=4}}return e}function s(t,e,n){this.offset=e||0,this.view=t,this.bytes=n}function c(t,e,n){var r=typeof t;if("string"===r){if((o=u(t))<32)return e.setUint8(n,160|o),i(e,n+1,t),1+o;if(o<65536)return e.setUint8(n,218),e.setUint16(n+1,o),i(e,n+3,t),3+o;if(o<4294967296)return e.setUint8(n,219),e.setUint32(n+1,o),i(e,n+5,t),5+o}if(t instanceof ArrayBuffer){if((o=t.byteLength)<65536)return e.setUint8(n,216),e.setUint16(n+1,o),new Uint8Array(e.buffer).set(new Uint8Array(t),n+3),3+o;if(o<4294967296)return e.setUint8(n,217),e.setUint32(n+1,o),new Uint8Array(e.buffer).set(new Uint8Array(t),n+5),5+o}if("number"===r){if(t<<0!==t)return e.setUint8(n,203),e.setFloat64(n+1,t),9;if(t>=0){if(t<128)return e.setUint8(n,t),1;if(t<256)return e.setUint8(n,204),e.setUint8(n+1,t),2;if(t<65536)return e.setUint8(n,205),e.setUint16(n+1,t),3;if(t<4294967296)return e.setUint8(n,206),e.setUint32(n+1,t),5;throw new Error("Number too big 0x"+t.toString(16))}if(t>=-32)return e.setInt8(n,t),1;if(t>=-128)return e.setUint8(n,208),e.setInt8(n+1,t),2;if(t>=-32768)return e.setUint8(n,209),e.setInt16(n+1,t),3;if(t>=-2147483648)return e.setUint8(n,210),e.setInt32(n+1,t),5;throw new Error("Number too small -0x"+(-t).toString(16).substr(1))}if("undefined"===r)return e.setUint8(n,196),1;if(null===t)return e.setUint8(n,192),1;if("boolean"===r)return e.setUint8(n,t?195:194),1;if("object"===r){var o,s=0,a=Array.isArray(t);if(a)o=t.length;else{var f=Object.keys(t);o=f.length}if(o<16?(e.setUint8(n,o|(a?144:128)),s=1):o<65536?(e.setUint8(n,a?220:222),e.setUint16(n+1,o),s=3):o<4294967296&&(e.setUint8(n,a?221:223),e.setUint32(n+1,o),s=5),a)for(var l=0;l<o;l++)s+=c(t[l],e,n+s);else for(l=0;l<o;l++){var h=f[l];s+=c(h,e,n+s),s+=c(t[h],e,n+s)}return s}throw new Error("Unknown type "+r)}function f(t){var e=typeof t;if("string"===e){if((n=u(t))<32)return 1+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(t instanceof ArrayBuffer){if((n=t.byteLength)<65536)return 3+n;if(n<4294967296)return 5+n}if("number"===e){if(t<<0!==t)return 9;if(t>=0){if(t<128)return 1;if(t<256)return 2;if(t<65536)return 3;if(t<4294967296)return 5;if(t<0x10000000000000000)return 9;throw new Error("Number too big 0x"+t.toString(16))}if(t>=-32)return 1;if(t>=-128)return 2;if(t>=-32768)return 3;if(t>=-2147483648)return 5;if(t>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+t.toString(16).substr(1))}if("boolean"===e||"undefined"===e||null===t)return 1;if("object"===e){var n,r=0;if(Array.isArray(t)){n=t.length;for(var i=0;i<n;i++)r+=f(t[i])}else{var o=Object.keys(t);for(n=o.length,i=0;i<n;i++){var s=o[i];r+=f(s)+f(t[s])}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}throw new Error("Unknown type "+e)}e.inspect=function(t){if(void 0===t)return"undefined";var e,n;if(t instanceof ArrayBuffer?(n="ArrayBuffer",e=new DataView(t)):t instanceof DataView&&(n="DataView",e=t),!e)return JSON.stringify(t);for(var r=[],i=0;i<t.byteLength;i++){if(i>20){r.push("...");break}var o=e.getUint8(i).toString(16);1===o.length&&(o="0"+o),r.push(o)}return"<"+n+" "+r.join(" ")+">"},e.utf8Write=i,e.utf8Read=o,e.utf8ByteCount=u,e.encode=function(t){var e=new ArrayBuffer(f(t));return c(t,new DataView(e),0),e},e.decode=function(t){var e=t.buffer,n=new s(new DataView(e),0,t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},s.prototype.map=function(t){for(var e={},n=0;n<t;n++)e[this.parse()]=this.parse();return e},s.prototype.buf=function(t){var e=new ArrayBuffer(t);return new Uint8Array(e).set(new Uint8Array(this.view.buffer,this.offset,t),0),this.offset+=t,e},s.prototype.raw=function(t){var e=o(this.view,this.offset,t);return this.offset+=t,e},s.prototype.array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.parse();return e},s.prototype.parse=function(){var t,e,n=this.view.getUint8(this.offset);if(160==(224&n))return e=31&n,this.offset++,this.raw(e);if(128==(240&n))return e=15&n,this.offset++,this.map(e);if(144==(240&n))return e=15&n,this.offset++,this.array(e);if(0==(128&n))return this.offset++,n;if(224==(224&n))return t=this.view.getInt8(this.offset),this.offset++,t;switch(n){case 218:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.raw(e);case 219:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.raw(e);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return void this.offset++;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 211:return t=this.view.getBigInt64?this.view.getBigInt64(this.offset+1):4294967296*this.view.getInt32(this.offset+1)+this.view.getUint32(this.offset+5),this.offset+=9,t;case 222:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.map(e);case 223:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.map(e);case 220:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.array(e);case 221:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.array(e);case 216:return e=this.view.getUint16(this.offset+1),this.offset+=3,this.buf(e);case 217:return e=this.view.getUint32(this.offset+1),this.offset+=5,this.buf(e);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t;case 207:var r=this.bytes;return this.offset++,4294967296*(16777216*r[this.offset++]+(r[this.offset++]<<16)+(r[this.offset++]<<8)+r[this.offset++])+16777216*r[this.offset++]+(r[this.offset++]<<16)+(r[this.offset++]<<8)+r[this.offset++]}throw new Error("Unknown type 0x"+n.toString(16))};var l=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h=String.fromCharCode,p=function(t){var e=t.length,n=e%4,r=(e>0?l[t.charAt(0)]<<18:0)|(e>1?l[t.charAt(1)]<<12:0)|(e>2?l[t.charAt(2)]<<6:0)|(e>3?l[t.charAt(3)]:0),i=[h(r>>>16),h(r>>>8&255),h(255&r)];return i.length-=[0,0,2,1][n],i.join("")},v=void 0!==a&&a.atob?function(t){return a.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,p)};e.decodeFromB64=function(t){for(var n=v(t),r=n.length,i=new Uint8Array(r),o=0;o<r;o++){var u=n.charCodeAt(o);i[o]=u}return e.decode(i)}},48:(t,e,n)=>{var r=n(672);t.exports={TextEncoder:r.TextEncoder,TextDecoder:r.TextDecoder}},672:function(t){!function(e){function n(t,e,n){return e<=t&&t<=n}function r(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}Math.floor;var i=-1;function o(t){this.tokens=[].slice.call(t),this.tokens.reverse()}o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():i},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.pop());else this.tokens.push(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.shift());else this.tokens.unshift(t)}};var u=-1;function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}function a(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(c,t)?c[t]:null}var c={};[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"}].forEach((function(t){t.encodings.forEach((function(t){t.labels.forEach((function(e){c[e]=t}))}))}));var f={},l={},h="utf-8";function p(t,e){if(!(this instanceof p))throw TypeError("Called as a function. Did you forget 'new'?");t=void 0!==t?String(t):h,e=r(e),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=a(t);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!l[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");var i=this;return i._encoding=n,Boolean(e.fatal)&&(i._error_mode="fatal"),Boolean(e.ignoreBOM)&&(i._ignoreBOM=!0),Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase(),this.fatal="fatal"===i._error_mode,this.ignoreBOM=i._ignoreBOM),i}function v(t,n){if(!(this instanceof v))throw TypeError("Called as a function. Did you forget 'new'?");n=r(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var i=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var o=a(t=void 0!==t?String(t):h);if(null===o||"replacement"===o.name)throw RangeError("Unknown encoding: "+t);if(!f[o.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");i._encoding=o}else i._encoding=a("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase()),i}function g(t){var e=t.fatal,r=0,o=0,a=0,c=128,f=191;this.handler=function(t,l){if(l===i&&0!==a)return a=0,s(e);if(l===i)return u;if(0===a){if(n(l,0,127))return l;if(n(l,194,223))a=1,r=31&l;else if(n(l,224,239))224===l&&(c=160),237===l&&(f=159),a=2,r=15&l;else{if(!n(l,240,244))return s(e);240===l&&(c=144),244===l&&(f=143),a=3,r=7&l}return null}if(!n(l,c,f))return r=a=o=0,c=128,f=191,t.prepend(l),s(e);if(c=128,f=191,r=r<<6|63&l,(o+=1)!==a)return null;var h=r;return r=a=o=0,h}}function d(t){t.fatal,this.handler=function(t,e){if(e===i)return u;if(n(e,0,127))return e;var r,o;n(e,128,2047)?(r=1,o=192):n(e,2048,65535)?(r=2,o=224):n(e,65536,1114111)&&(r=3,o=240);for(var s=[(e>>6*r)+o];r>0;){var a=e>>6*(r-1);s.push(128|63&a),r-=1}return s}}Object.defineProperty&&(Object.defineProperty(p.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(p.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(p.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),p.prototype.decode=function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=r(e),this._do_not_flush||(this._decoder=l[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(e.stream);for(var s,a=new o(n),c=[];;){var f=a.read();if(f===i)break;if((s=this._decoder.handler(a,f))===u)break;null!==s&&(Array.isArray(s)?c.push.apply(c,s):c.push(s))}if(!this._do_not_flush){do{if((s=this._decoder.handler(a,a.read()))===u)break;null!==s&&(Array.isArray(s)?c.push.apply(c,s):c.push(s))}while(!a.endOfStream());this._decoder=null}return function(t){var e,n;return e=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===e.indexOf(n)||this._ignoreBOM||this._BOMseen||(t.length>0&&65279===t[0]?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(t)}.call(this,c)},Object.defineProperty&&Object.defineProperty(v.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),v.prototype.encode=function(t,e){t=t?String(t):"",e=r(e),this._do_not_flush||(this._encoder=f[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(e.stream);for(var n,s=new o(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var u=t.charCodeAt(r+1);if(56320<=u&&u<=57343){var s=1023&o,a=1023&u;i.push(65536+(s<<10)+a),r+=1}else i.push(65533)}r+=1}return i}(t)),a=[];;){var c=s.read();if(c===i)break;if((n=this._encoder.handler(s,c))===u)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(s,s.read()))!==u;)Array.isArray(n)?a.push.apply(a,n):a.push(n);this._encoder=null}return new Uint8Array(a)},f["UTF-8"]=function(t){return new d(t)},l["UTF-8"]=function(t){return new g(t)},e.TextEncoder||(e.TextEncoder=v),e.TextDecoder||(e.TextDecoder=p),t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder})}(this||{})},204:t=>{var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,u,c;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),u=o[e]),void 0===u)u=o[e]=n,++t._eventsCount;else if("function"==typeof u?u=o[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(i=a(t))>0&&u.length>i&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=u.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var u;if(e.length>0&&(u=e[0]),u instanceof Error)throw u;var s=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw s.context=u,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)r(a,this,e);else{var c=a.length,f=v(a,c);for(n=0;n<c;++n)r(f[n],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,u;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){u=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,u||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return h(this,t,!0)},o.prototype.rawListeners=function(t){return h(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},392:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",u="__lodash_hash_undefined__",s="__lodash_placeholder__",a=32,c=128,f=1/0,l=9007199254740991,h=NaN,p=4294967295,v=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",a],["partialRight",64],["rearg",256]],g="[object Arguments]",d="[object Array]",y="[object Boolean]",_="[object Date]",m="[object Error]",w="[object Function]",b="[object GeneratorFunction]",S="[object Map]",E="[object Number]",C="[object Object]",I="[object Promise]",L="[object RegExp]",O="[object Set]",A="[object String]",N="[object Symbol]",T="[object WeakMap]",j="[object ArrayBuffer]",U="[object DataView]",x="[object Float32Array]",M="[object Float64Array]",R="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",D="[object Uint8Array]",G="[object Uint8ClampedArray]",B="[object Uint16Array]",F="[object Uint32Array]",W=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,$=RegExp(V.source),J=RegExp(K.source),q=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,at=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,dt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",It="A-Z\\xc0-\\xd6\\xd8-\\xde",Lt="\\ufe0e\\ufe0f",Ot="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",At="["+bt+"]",Nt="["+Ot+"]",Tt="["+St+"]",jt="\\d+",Ut="["+Et+"]",xt="["+Ct+"]",Mt="[^"+bt+Ot+jt+Et+Ct+It+"]",Rt="\\ud83c[\\udffb-\\udfff]",kt="[^"+bt+"]",Pt="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Gt="["+It+"]",Bt="\\u200d",Ft="(?:"+xt+"|"+Mt+")",Wt="(?:"+Gt+"|"+Mt+")",Ht="(?:['’](?:d|ll|m|re|s|t|ve))?",zt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+Tt+"|"+Rt+")?",Kt="["+Lt+"]?",$t=Kt+Vt+"(?:"+Bt+"(?:"+[kt,Pt,Dt].join("|")+")"+Kt+Vt+")*",Jt="(?:"+[Ut,Pt,Dt].join("|")+")"+$t,qt="(?:"+[kt+Tt+"?",Tt,Pt,Dt,At].join("|")+")",Zt=RegExp("['’]","g"),Qt=RegExp(Tt,"g"),Yt=RegExp(Rt+"(?="+Rt+")|"+qt+$t,"g"),Xt=RegExp([Gt+"?"+xt+"+"+Ht+"(?="+[Nt,Gt,"$"].join("|")+")",Wt+"+"+zt+"(?="+[Nt,Gt+Ft,"$"].join("|")+")",Gt+"?"+Ft+"+"+Ht,Gt+"+"+zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jt,Jt].join("|"),"g"),te=RegExp("["+Bt+bt+St+Lt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[x]=ie[M]=ie[R]=ie[k]=ie[P]=ie[D]=ie[G]=ie[B]=ie[F]=!0,ie[g]=ie[d]=ie[j]=ie[y]=ie[U]=ie[_]=ie[m]=ie[w]=ie[S]=ie[E]=ie[C]=ie[L]=ie[O]=ie[A]=ie[T]=!1;var oe={};oe[g]=oe[d]=oe[j]=oe[U]=oe[y]=oe[_]=oe[x]=oe[M]=oe[R]=oe[k]=oe[P]=oe[S]=oe[E]=oe[C]=oe[L]=oe[O]=oe[A]=oe[N]=oe[D]=oe[G]=oe[B]=oe[F]=!0,oe[m]=oe[w]=oe[T]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ae=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,fe="object"==typeof self&&self&&self.Object===Object&&self,le=ce||fe||Function("return this")(),he=e&&!e.nodeType&&e,pe=he&&t&&!t.nodeType&&t,ve=pe&&pe.exports===he,ge=ve&&ce.process,de=function(){try{return pe&&pe.require&&pe.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ye=de&&de.isArrayBuffer,_e=de&&de.isDate,me=de&&de.isMap,we=de&&de.isRegExp,be=de&&de.isSet,Se=de&&de.isTypedArray;function Ee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var u=t[i];e(r,u,n(u),t)}return r}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ae(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var u=t[n];e(u,n,t)&&(o[i++]=u)}return o}function Ne(t,e){return!(null==t||!t.length)&&Ge(t,e,0)>-1}function Te(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ue(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function xe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Me(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Re(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ke=He("length");function Pe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function De(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ge(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):De(t,Fe,n)}function Be(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Fe(t){return t!=t}function We(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:h}function He(t){return function(e){return null==e?i:e[t]}}function ze(t){return function(e){return null==t?i:t[e]}}function Ve(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ke(t,e){for(var n,r=-1,o=t.length;++r<o;){var u=e(t[r]);u!==i&&(n=n===i?u:n+u)}return n}function $e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,hn(t)+1).replace(rt,""):t}function qe(t){return function(e){return t(e)}}function Ze(t,e){return je(e,(function(e){return t[e]}))}function Qe(t,e){return t.has(e)}function Ye(t,e){for(var n=-1,r=t.length;++n<r&&Ge(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Ge(e,t[n],0)>-1;);return n}var tn=ze({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ue[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function un(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n];u!==e&&u!==s||(t[n]=s,o[i++]=n)}return o}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return rn(t)?function(t){for(var e=Yt.lastIndex=0;Yt.test(t);)++e;return e}(t):ke(t)}function ln(t){return rn(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.split("")}(t)}function hn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var pn=ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),vn=function t(e){var n,r=(e=null==e?le:vn.defaults(le.Object(),e,vn.pick(le,ne))).Array,it=e.Date,bt=e.Error,St=e.Function,Et=e.Math,Ct=e.Object,It=e.RegExp,Lt=e.String,Ot=e.TypeError,At=r.prototype,Nt=St.prototype,Tt=Ct.prototype,jt=e["__core-js_shared__"],Ut=Nt.toString,xt=Tt.hasOwnProperty,Mt=0,Rt=(n=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",kt=Tt.toString,Pt=Ut.call(Ct),Dt=le._,Gt=It("^"+Ut.call(xt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=ve?e.Buffer:i,Ft=e.Symbol,Wt=e.Uint8Array,Ht=Bt?Bt.allocUnsafe:i,zt=un(Ct.getPrototypeOf,Ct),Vt=Ct.create,Kt=Tt.propertyIsEnumerable,$t=At.splice,Jt=Ft?Ft.isConcatSpreadable:i,qt=Ft?Ft.iterator:i,Yt=Ft?Ft.toStringTag:i,te=function(){try{var t=ao(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),ue=e.clearTimeout!==le.clearTimeout&&e.clearTimeout,ce=it&&it.now!==le.Date.now&&it.now,fe=e.setTimeout!==le.setTimeout&&e.setTimeout,he=Et.ceil,pe=Et.floor,ge=Ct.getOwnPropertySymbols,de=Bt?Bt.isBuffer:i,ke=e.isFinite,ze=At.join,gn=un(Ct.keys,Ct),dn=Et.max,yn=Et.min,_n=it.now,mn=e.parseInt,wn=Et.random,bn=At.reverse,Sn=ao(e,"DataView"),En=ao(e,"Map"),Cn=ao(e,"Promise"),In=ao(e,"Set"),Ln=ao(e,"WeakMap"),On=ao(Ct,"create"),An=Ln&&new Ln,Nn={},Tn=Po(Sn),jn=Po(En),Un=Po(Cn),xn=Po(In),Mn=Po(Ln),Rn=Ft?Ft.prototype:i,kn=Rn?Rn.valueOf:i,Pn=Rn?Rn.toString:i;function Dn(t){if(ts(t)&&!Hu(t)&&!(t instanceof Wn)){if(t instanceof Fn)return t;if(xt.call(t,"__wrapped__"))return Do(t)}return new Fn(t)}var Gn=function(){function t(){}return function(e){if(!Xu(e))return{};if(Vt)return Vt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Bn(){}function Fn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Vn;++e<n;)this.add(t[e])}function $n(t){var e=this.__data__=new zn(t);this.size=e.size}function Jn(t,e){var n=Hu(t),r=!n&&Wu(t),i=!n&&!r&&$u(t),o=!n&&!r&&!i&&as(t),u=n||r||i||o,s=u?$e(t.length,Lt):[],a=s.length;for(var c in t)!e&&!xt.call(t,c)||u&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||go(c,a))||s.push(c);return s}function qn(t){var e=t.length;return e?t[Vr(0,e-1)]:i}function Zn(t,e){return Uo(Li(t),or(e,0,t.length))}function Qn(t){return Uo(Li(t))}function Yn(t,e,n){(n!==i&&!Gu(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Xn(t,e,n){var r=t[e];xt.call(t,e)&&Gu(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Gu(t[n][0],e))return n;return-1}function er(t,e,n,r){return fr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Oi(e,Ts(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,u=r(o),s=null==t;++n<o;)u[n]=s?i:Is(t,e[n]);return u}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ur(t,e,n,r,o,u){var s,a=1&e,c=2&e,f=4&e;if(n&&(s=o?n(t,r,o,u):n(t)),s!==i)return s;if(!Xu(t))return t;var l=Hu(t);if(l){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&xt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!a)return Li(t,s)}else{var h=lo(t),p=h==w||h==b;if($u(t))return wi(t,a);if(h==C||h==g||p&&!o){if(s=c||p?{}:po(t),!a)return c?function(t,e){return Oi(t,fo(t),e)}(t,function(t,e){return t&&Oi(e,js(e),t)}(s,t)):function(t,e){return Oi(t,co(t),e)}(t,nr(s,t))}else{if(!oe[h])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case j:return bi(t);case y:case _:return new i(+t);case U:return function(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case x:case M:case R:case k:case P:case D:case G:case B:case F:return Si(t,n);case S:return new i;case E:case A:return new i(t);case L:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return new i;case N:return r=t,kn?Ct(kn.call(r)):{}}}(t,h,a)}}u||(u=new $n);var v=u.get(t);if(v)return v;u.set(t,s),os(t)?t.forEach((function(r){s.add(ur(r,e,n,r,t,u))})):es(t)&&t.forEach((function(r,i){s.set(i,ur(r,e,n,i,t,u))}));var d=l?i:(f?c?eo:to:c?js:Ts)(t);return Ie(d||t,(function(r,i){d&&(r=t[i=r]),Xn(s,i,ur(r,e,n,i,t,u))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Ct(t);r--;){var o=n[r],u=e[o],s=t[o];if(s===i&&!(o in t)||!u(s))return!1}return!0}function ar(t,e,n){if("function"!=typeof t)throw new Ot(o);return Ao((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,o=Ne,u=!0,s=t.length,a=[],c=e.length;if(!s)return a;n&&(e=je(e,qe(n))),r?(o=Te,u=!1):e.length>=200&&(o=Qe,u=!1,e=new Kn(e));t:for(;++i<s;){var f=t[i],l=null==n?f:n(f);if(f=r||0!==f?f:0,u&&l==l){for(var h=c;h--;)if(e[h]===l)continue t;a.push(f)}else o(e,l,r)||a.push(f)}return a}Dn.templateSettings={escape:q,evaluate:Z,interpolate:Q,variable:"",imports:{_:Dn}},Dn.prototype=Bn.prototype,Dn.prototype.constructor=Dn,Fn.prototype=Gn(Bn.prototype),Fn.prototype.constructor=Fn,Wn.prototype=Gn(Bn.prototype),Wn.prototype.constructor=Wn,Hn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(On){var n=e[t];return n===u?i:n}return xt.call(e,t)?e[t]:i},Hn.prototype.has=function(t){var e=this.__data__;return On?e[t]!==i:xt.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=On&&e===i?u:e,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():$t.call(e,n,1),--this.size,0))},zn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},zn.prototype.has=function(t){return tr(this.__data__,t)>-1},zn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(En||zn),string:new Hn}},Vn.prototype.delete=function(t){var e=uo(this,t).delete(t);return this.size-=e?1:0,e},Vn.prototype.get=function(t){return uo(this,t).get(t)},Vn.prototype.has=function(t){return uo(this,t).has(t)},Vn.prototype.set=function(t,e){var n=uo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,u),this},Kn.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.clear=function(){this.__data__=new zn,this.size=0},$n.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$n.prototype.get=function(t){return this.__data__.get(t)},$n.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Vn(r)}return n.set(t,e),this.size=n.size,this};var fr=Ti(_r),lr=Ti(mr,!0);function hr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var u=t[r],s=e(u);if(null!=s&&(a===i?s==s&&!ss(s):n(s,a)))var a=s,c=u}return c}function vr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,u=t.length;for(n||(n=vo),i||(i=[]);++o<u;){var s=t[o];e>0&&n(s)?e>1?gr(s,e-1,n,r,i):Ue(i,s):r||(i[i.length]=s)}return i}var dr=ji(),yr=ji(!0);function _r(t,e){return t&&dr(t,e,Ts)}function mr(t,e){return t&&yr(t,e,Ts)}function wr(t,e){return Ae(e,(function(e){return Zu(t[e])}))}function br(t,e){for(var n=0,r=(e=di(e,t)).length;null!=t&&n<r;)t=t[ko(e[n++])];return n&&n==r?t:i}function Sr(t,e,n){var r=e(t);return Hu(t)?r:Ue(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":Yt&&Yt in Ct(t)?function(t){var e=xt.call(t,Yt),n=t[Yt];try{t[Yt]=i;var r=!0}catch(t){}var o=kt.call(t);return r&&(e?t[Yt]=n:delete t[Yt]),o}(t):function(t){return kt.call(t)}(t)}function Cr(t,e){return t>e}function Ir(t,e){return null!=t&&xt.call(t,e)}function Lr(t,e){return null!=t&&e in Ct(t)}function Or(t,e,n){for(var o=n?Te:Ne,u=t[0].length,s=t.length,a=s,c=r(s),f=1/0,l=[];a--;){var h=t[a];a&&e&&(h=je(h,qe(e))),f=yn(h.length,f),c[a]=!n&&(e||u>=120&&h.length>=120)?new Kn(a&&h):i}h=t[0];var p=-1,v=c[0];t:for(;++p<u&&l.length<f;){var g=h[p],d=e?e(g):g;if(g=n||0!==g?g:0,!(v?Qe(v,d):o(l,d,n))){for(a=s;--a;){var y=c[a];if(!(y?Qe(y,d):o(t[a],d,n)))continue t}v&&v.push(d),l.push(g)}}return l}function Ar(t,e,n){var r=null==(t=Io(t,e=di(e,t)))?t:t[ko(qo(e))];return null==r?i:Ee(r,t,n)}function Nr(t){return ts(t)&&Er(t)==g}function Tr(t,e,n,r,o){return t===e||(null==t||null==e||!ts(t)&&!ts(e)?t!=t&&e!=e:function(t,e,n,r,o,u){var s=Hu(t),a=Hu(e),c=s?d:lo(t),f=a?d:lo(e),l=(c=c==g?C:c)==C,h=(f=f==g?C:f)==C,p=c==f;if(p&&$u(t)){if(!$u(e))return!1;s=!0,l=!1}if(p&&!l)return u||(u=new $n),s||as(t)?Yi(t,e,n,r,o,u):function(t,e,n,r,i,o,u){switch(n){case U:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case j:return!(t.byteLength!=e.byteLength||!o(new Wt(t),new Wt(e)));case y:case _:case E:return Gu(+t,+e);case m:return t.name==e.name&&t.message==e.message;case L:case A:return t==e+"";case S:var s=on;case O:var a=1&r;if(s||(s=an),t.size!=e.size&&!a)return!1;var c=u.get(t);if(c)return c==e;r|=2,u.set(t,e);var f=Yi(s(t),s(e),r,i,o,u);return u.delete(t),f;case N:if(kn)return kn.call(t)==kn.call(e)}return!1}(t,e,c,n,r,o,u);if(!(1&n)){var v=l&&xt.call(t,"__wrapped__"),w=h&&xt.call(e,"__wrapped__");if(v||w){var b=v?t.value():t,I=w?e.value():e;return u||(u=new $n),o(b,I,n,r,u)}}return!!p&&(u||(u=new $n),function(t,e,n,r,o,u){var s=1&n,a=to(t),c=a.length;if(c!=to(e).length&&!s)return!1;for(var f=c;f--;){var l=a[f];if(!(s?l in e:xt.call(e,l)))return!1}var h=u.get(t),p=u.get(e);if(h&&p)return h==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var g=s;++f<c;){var d=t[l=a[f]],y=e[l];if(r)var _=s?r(y,d,l,e,t,u):r(d,y,l,t,e,u);if(!(_===i?d===y||o(d,y,n,r,u):_)){v=!1;break}g||(g="constructor"==l)}if(v&&!g){var m=t.constructor,w=e.constructor;m==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof w&&w instanceof w||(v=!1)}return u.delete(t),u.delete(e),v}(t,e,n,r,o,u))}(t,e,n,r,Tr,o))}function jr(t,e,n,r){var o=n.length,u=o,s=!r;if(null==t)return!u;for(t=Ct(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var c=(a=n[o])[0],f=t[c],l=a[1];if(s&&a[2]){if(f===i&&!(c in t))return!1}else{var h=new $n;if(r)var p=r(f,l,c,t,e,h);if(!(p===i?Tr(l,f,3,r,h):p))return!1}}return!0}function Ur(t){return!(!Xu(t)||(e=t,Rt&&Rt in e))&&(Zu(t)?Gt:gt).test(Po(t));var e}function xr(t){return"function"==typeof t?t:null==t?na:"object"==typeof t?Hu(t)?Dr(t[0],t[1]):Pr(t):la(t)}function Mr(t){if(!bo(t))return gn(t);var e=[];for(var n in Ct(t))xt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rr(t,e){return t<e}function kr(t,e){var n=-1,i=Vu(t)?r(t.length):[];return fr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Pr(t){var e=so(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||jr(n,t,e)}}function Dr(t,e){return _o(t)&&So(e)?Eo(ko(t),e):function(n){var r=Is(n,t);return r===i&&r===e?Ls(n,t):Tr(e,r,3)}}function Gr(t,e,n,r,o){t!==e&&dr(e,(function(u,s){if(o||(o=new $n),Xu(u))!function(t,e,n,r,o,u,s){var a=Lo(t,n),c=Lo(e,n),f=s.get(c);if(f)Yn(t,n,f);else{var l=u?u(a,c,n+"",t,e,s):i,h=l===i;if(h){var p=Hu(c),v=!p&&$u(c),g=!p&&!v&&as(c);l=c,p||v||g?Hu(a)?l=a:Ku(a)?l=Li(a):v?(h=!1,l=wi(c,!0)):g?(h=!1,l=Si(c,!0)):l=[]:rs(c)||Wu(c)?(l=a,Wu(a)?l=ds(a):Xu(a)&&!Zu(a)||(l=po(c))):h=!1}h&&(s.set(c,l),o(l,c,r,u,s),s.delete(c)),Yn(t,n,l)}}(t,e,s,n,Gr,r,o);else{var a=r?r(Lo(t,s),u,s+"",t,e,o):i;a===i&&(a=u),Yn(t,s,a)}}),js)}function Br(t,e){var n=t.length;if(n)return go(e+=e<0?n:0,n)?t[e]:i}function Fr(t,e,n){e=e.length?je(e,(function(t){return Hu(t)?function(e){return br(e,1===t.length?t[0]:t)}:t})):[na];var r=-1;e=je(e,qe(oo()));var i=kr(t,(function(t,n,i){var o=je(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,u=i.length,s=n.length;++r<u;){var a=Ei(i[r],o[r]);if(a)return r>=s?a:a*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Wr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var u=e[r],s=br(t,u);n(s,u)&&Zr(o,di(u,t),s)}return o}function Hr(t,e,n,r){var i=r?Be:Ge,o=-1,u=e.length,s=t;for(t===e&&(e=Li(e)),n&&(s=je(t,qe(n)));++o<u;)for(var a=0,c=e[o],f=n?n(c):c;(a=i(s,f,a,r))>-1;)s!==t&&$t.call(s,a,1),$t.call(t,a,1);return t}function zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;go(i)?$t.call(t,i,1):ai(t,i)}}return t}function Vr(t,e){return t+pe(wn()*(e-t+1))}function Kr(t,e){var n="";if(!t||e<1||e>l)return n;do{e%2&&(n+=t),(e=pe(e/2))&&(t+=t)}while(e);return n}function $r(t,e){return No(Co(t,e,na),t+"")}function Jr(t){return qn(Gs(t))}function qr(t,e){var n=Gs(t);return Uo(n,or(e,0,n.length))}function Zr(t,e,n,r){if(!Xu(t))return t;for(var o=-1,u=(e=di(e,t)).length,s=u-1,a=t;null!=a&&++o<u;){var c=ko(e[o]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var l=a[c];(f=r?r(l,c,a):i)===i&&(f=Xu(l)?l:go(e[o+1])?[]:{})}Xn(a,c,f),a=a[c]}return t}var Qr=An?function(t,e){return An.set(t,e),t}:na,Yr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Xs(e),writable:!0})}:na;function Xr(t){return Uo(Gs(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var u=r(o);++i<o;)u[i]=t[i+e];return u}function ei(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,u=t[o];null!==u&&!ss(u)&&(n?u<=e:u<e)?r=o+1:i=o}return i}return ri(t,e,na,n)}function ri(t,e,n,r){var o=0,u=null==t?0:t.length;if(0===u)return 0;for(var s=(e=n(e))!=e,a=null===e,c=ss(e),f=e===i;o<u;){var l=pe((o+u)/2),h=n(t[l]),p=h!==i,v=null===h,g=h==h,d=ss(h);if(s)var y=r||g;else y=f?g&&(r||p):a?g&&p&&(r||!v):c?g&&p&&!v&&(r||!d):!v&&!d&&(r?h<=e:h<e);y?o=l+1:u=l}return yn(u,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n],s=e?e(u):u;if(!n||!Gu(s,a)){var a=s;o[i++]=0===u?0:u}}return o}function oi(t){return"number"==typeof t?t:ss(t)?h:+t}function ui(t){if("string"==typeof t)return t;if(Hu(t))return je(t,ui)+"";if(ss(t))return Pn?Pn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Ne,o=t.length,u=!0,s=[],a=s;if(n)u=!1,i=Te;else if(o>=200){var c=e?null:Ki(t);if(c)return an(c);u=!1,i=Qe,a=new Kn}else a=e?[]:s;t:for(;++r<o;){var f=t[r],l=e?e(f):f;if(f=n||0!==f?f:0,u&&l==l){for(var h=a.length;h--;)if(a[h]===l)continue t;e&&a.push(l),s.push(f)}else i(a,l,n)||(a!==s&&a.push(l),s.push(f))}return s}function ai(t,e){return null==(t=Io(t,e=di(e,t)))||delete t[ko(qo(e))]}function ci(t,e,n,r){return Zr(t,e,n(br(t,e)),r)}function fi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function li(t,e){var n=t;return n instanceof Wn&&(n=n.value()),xe(e,(function(t,e){return e.func.apply(e.thisArg,Ue([t],e.args))}),n)}function hi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var o=-1,u=r(i);++o<i;)for(var s=t[o],a=-1;++a<i;)a!=o&&(u[o]=cr(u[o]||s,t[a],e,n));return si(gr(u,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,u=e.length,s={};++r<o;){var a=r<u?e[r]:i;n(s,t[r],a)}return s}function vi(t){return Ku(t)?t:[]}function gi(t){return"function"==typeof t?t:na}function di(t,e){return Hu(t)?t:_o(t,e)?[t]:Ro(ys(t))}var yi=$r;function _i(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var mi=ue||function(t){return le.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Ht?Ht(n):new t.constructor(n);return t.copy(r),r}function bi(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Si(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,u=ss(t),s=e!==i,a=null===e,c=e==e,f=ss(e);if(!a&&!f&&!u&&t>e||u&&s&&c&&!a&&!f||r&&s&&c||!n&&c||!o)return 1;if(!r&&!u&&!f&&t<e||f&&n&&o&&!r&&!u||a&&n&&o||!s&&o||!c)return-1}return 0}function Ci(t,e,n,i){for(var o=-1,u=t.length,s=n.length,a=-1,c=e.length,f=dn(u-s,0),l=r(c+f),h=!i;++a<c;)l[a]=e[a];for(;++o<s;)(h||o<u)&&(l[n[o]]=t[o]);for(;f--;)l[a++]=t[o++];return l}function Ii(t,e,n,i){for(var o=-1,u=t.length,s=-1,a=n.length,c=-1,f=e.length,l=dn(u-a,0),h=r(l+f),p=!i;++o<l;)h[o]=t[o];for(var v=o;++c<f;)h[v+c]=e[c];for(;++s<a;)(p||o<u)&&(h[v+n[s]]=t[o++]);return h}function Li(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Oi(t,e,n,r){var o=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var a=e[u],c=r?r(n[a],t[a],a,n,t):i;c===i&&(c=t[a]),o?rr(n,a,c):Xn(n,a,c)}return n}function Ai(t,e){return function(n,r){var i=Hu(n)?Ce:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ni(t){return $r((function(e,n){var r=-1,o=n.length,u=o>1?n[o-1]:i,s=o>2?n[2]:i;for(u=t.length>3&&"function"==typeof u?(o--,u):i,s&&yo(n[0],n[1],s)&&(u=o<3?i:u,o=1),e=Ct(e);++r<o;){var a=n[r];a&&t(e,a,r,u)}return e}))}function Ti(t,e){return function(n,r){if(null==n)return n;if(!Vu(n))return t(n,r);for(var i=n.length,o=e?i:-1,u=Ct(n);(e?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function ji(t){return function(e,n,r){for(var i=-1,o=Ct(e),u=r(e),s=u.length;s--;){var a=u[t?s:++i];if(!1===n(o[a],a,o))break}return e}}function Ui(t){return function(e){var n=rn(e=ys(e))?ln(e):i,r=n?n[0]:e.charAt(0),o=n?_i(n,1).join(""):e.slice(1);return r[t]()+o}}function xi(t){return function(e){return xe(Zs(Ws(e).replace(Zt,"")),t,"")}}function Mi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Gn(t.prototype),r=t.apply(n,e);return Xu(r)?r:n}}function Ri(t){return function(e,n,r){var o=Ct(e);if(!Vu(e)){var u=oo(n,3);e=Ts(e),n=function(t){return u(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[u?e[s]:s]:i}}function ki(t){return Xi((function(e){var n=e.length,r=n,u=Fn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Ot(o);if(u&&!a&&"wrapper"==ro(s))var a=new Fn([],!0)}for(r=a?r:n;++r<n;){var c=ro(s=e[r]),f="wrapper"==c?no(s):i;a=f&&mo(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?a[ro(f[0])].apply(a,f[3]):1==s.length&&mo(s)?a[c]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Hu(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Pi(t,e,n,o,u,s,a,f,l,h){var p=e&c,v=1&e,g=2&e,d=24&e,y=512&e,_=g?i:Mi(t);return function c(){for(var m=arguments.length,w=r(m),b=m;b--;)w[b]=arguments[b];if(d)var S=io(c),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,S);if(o&&(w=Ci(w,o,u,d)),s&&(w=Ii(w,s,a,d)),m-=E,d&&m<h){var C=sn(w,S);return zi(t,e,Pi,c.placeholder,n,w,C,f,l,h-m)}var I=v?n:this,L=g?I[t]:t;return m=w.length,f?w=function(t,e){for(var n=t.length,r=yn(e.length,n),o=Li(t);r--;){var u=e[r];t[r]=go(u,n)?o[u]:i}return t}(w,f):y&&m>1&&w.reverse(),p&&l<m&&(w.length=l),this&&this!==le&&this instanceof c&&(L=_||Mi(L)),L.apply(I,w)}}function Di(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Gi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Bi(t){return Xi((function(e){return e=je(e,qe(oo())),$r((function(n){var r=this;return t(e,(function(t){return Ee(t,r,n)}))}))}))}function Fi(t,e){var n=(e=e===i?" ":ui(e)).length;if(n<2)return n?Kr(e,t):e;var r=Kr(e,he(t/fn(e)));return rn(e)?_i(ln(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=hs(e),n===i?(n=e,e=0):n=hs(n),function(t,e,n,i){for(var o=-1,u=dn(he((e-t)/(n||1)),0),s=r(u);u--;)s[i?u:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:hs(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function zi(t,e,n,r,o,u,s,c,f,l){var h=8&e;e|=h?a:64,4&(e&=~(h?64:a))||(e&=-4);var p=[t,e,o,h?u:i,h?s:i,h?i:u,h?i:s,c,f,l],v=n.apply(i,p);return mo(t)&&Oo(v,p),v.placeholder=r,To(v,t,e)}function Vi(t){var e=Et[t];return function(t,n){if(t=gs(t),(n=null==n?0:yn(ps(n),292))&&ke(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ki=In&&1/an(new In([,-0]))[1]==f?function(t){return new In(t)}:sa;function $i(t){return function(e){var n=lo(e);return n==S?on(e):n==O?cn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ji(t,e,n,u,f,l,h,p){var v=2&e;if(!v&&"function"!=typeof t)throw new Ot(o);var g=u?u.length:0;if(g||(e&=-97,u=f=i),h=h===i?h:dn(ps(h),0),p=p===i?p:ps(p),g-=f?f.length:0,64&e){var d=u,y=f;u=f=i}var _=v?i:no(t),m=[t,e,n,u,f,d,y,l,h,p];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,u=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!u)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var a=e[3];if(a){var f=t[3];t[3]=f?Ci(f,a,e[4]):a,t[4]=f?sn(t[3],s):e[4]}(a=e[5])&&(f=t[5],t[5]=f?Ii(f,a,e[6]):a,t[6]=f?sn(t[5],s):e[6]),(a=e[7])&&(t[7]=a),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(m,_),t=m[0],e=m[1],n=m[2],u=m[3],f=m[4],!(p=m[9]=m[9]===i?v?0:t.length:dn(m[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var o=Mi(t);return function u(){for(var s=arguments.length,a=r(s),c=s,f=io(u);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==f&&a[s-1]!==f?[]:sn(a,f);return(s-=l.length)<n?zi(t,e,Pi,u.placeholder,i,a,l,i,i,n-s):Ee(this&&this!==le&&this instanceof u?o:t,this,a)}}(t,e,p):e!=a&&33!=e||f.length?Pi.apply(i,m):function(t,e,n,i){var o=1&e,u=Mi(t);return function e(){for(var s=-1,a=arguments.length,c=-1,f=i.length,l=r(f+a),h=this&&this!==le&&this instanceof e?u:t;++c<f;)l[c]=i[c];for(;a--;)l[c++]=arguments[++s];return Ee(h,o?n:this,l)}}(t,e,n,u);else var w=function(t,e,n){var r=1&e,i=Mi(t);return function e(){return(this&&this!==le&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return To((_?Qr:Oo)(w,m),t,e)}function qi(t,e,n,r){return t===i||Gu(t,Tt[n])&&!xt.call(r,n)?e:t}function Zi(t,e,n,r,o,u){return Xu(t)&&Xu(e)&&(u.set(e,t),Gr(t,e,i,Zi,u),u.delete(e)),t}function Qi(t){return rs(t)?i:t}function Yi(t,e,n,r,o,u){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var f=u.get(t),l=u.get(e);if(f&&l)return f==e&&l==t;var h=-1,p=!0,v=2&n?new Kn:i;for(u.set(t,e),u.set(e,t);++h<a;){var g=t[h],d=e[h];if(r)var y=s?r(d,g,h,e,t,u):r(g,d,h,t,e,u);if(y!==i){if(y)continue;p=!1;break}if(v){if(!Re(e,(function(t,e){if(!Qe(v,e)&&(g===t||o(g,t,n,r,u)))return v.push(e)}))){p=!1;break}}else if(g!==d&&!o(g,d,n,r,u)){p=!1;break}}return u.delete(t),u.delete(e),p}function Xi(t){return No(Co(t,i,zo),t+"")}function to(t){return Sr(t,Ts,co)}function eo(t){return Sr(t,js,fo)}var no=An?function(t){return An.get(t)}:sa;function ro(t){for(var e=t.name+"",n=Nn[e],r=xt.call(Nn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(xt.call(Dn,"placeholder")?Dn:t).placeholder}function oo(){var t=Dn.iteratee||ra;return t=t===ra?xr:t,arguments.length?t(arguments[0],arguments[1]):t}function uo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=Ts(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,So(i)]}return e}function ao(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Ur(n)?n:i}var co=ge?function(t){return null==t?[]:(t=Ct(t),Ae(ge(t),(function(e){return Kt.call(t,e)})))}:va,fo=ge?function(t){for(var e=[];t;)Ue(e,co(t)),t=zt(t);return e}:va,lo=Er;function ho(t,e,n){for(var r=-1,i=(e=di(e,t)).length,o=!1;++r<i;){var u=ko(e[r]);if(!(o=null!=t&&n(t,u)))break;t=t[u]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Yu(i)&&go(u,i)&&(Hu(t)||Wu(t))}function po(t){return"function"!=typeof t.constructor||bo(t)?{}:Gn(zt(t))}function vo(t){return Hu(t)||Wu(t)||!!(Jt&&t&&t[Jt])}function go(t,e){var n=typeof t;return!!(e=null==e?l:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!Xu(n))return!1;var r=typeof e;return!!("number"==r?Vu(n)&&go(e,n.length):"string"==r&&e in n)&&Gu(n[e],t)}function _o(t,e){if(Hu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ss(t))||X.test(t)||!Y.test(t)||null!=e&&t in Ct(e)}function mo(t){var e=ro(t),n=Dn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(Sn&&lo(new Sn(new ArrayBuffer(1)))!=U||En&&lo(new En)!=S||Cn&&lo(Cn.resolve())!=I||In&&lo(new In)!=O||Ln&&lo(new Ln)!=T)&&(lo=function(t){var e=Er(t),n=e==C?t.constructor:i,r=n?Po(n):"";if(r)switch(r){case Tn:return U;case jn:return S;case Un:return I;case xn:return O;case Mn:return T}return e});var wo=jt?Zu:ga;function bo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function So(t){return t==t&&!Xu(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Ct(n))}}function Co(t,e,n){return e=dn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,u=dn(i.length-e,0),s=r(u);++o<u;)s[o]=i[e+o];o=-1;for(var a=r(e+1);++o<e;)a[o]=i[o];return a[e]=n(s),Ee(t,this,a)}}function Io(t,e){return e.length<2?t:br(t,ti(e,0,-1))}function Lo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Oo=jo(Qr),Ao=fe||function(t,e){return le.setTimeout(t,e)},No=jo(Yr);function To(t,e,n){var r=e+"";return No(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ie(v,(function(n){var r="_."+n[0];e&n[1]&&!Ne(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(st):[]}(r),n)))}function jo(t){var e=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Uo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var u=Vr(n,o),s=t[u];t[u]=t[n],t[n]=s}return t.length=e,t}var xo,Mo,Ro=(xo=xu((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}),(function(t){return 500===Mo.size&&Mo.clear(),t})),Mo=xo.cache,xo);function ko(t){if("string"==typeof t||ss(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Po(t){if(null!=t){try{return Ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Do(t){if(t instanceof Wn)return t.clone();var e=new Fn(t.__wrapped__,t.__chain__);return e.__actions__=Li(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Go=$r((function(t,e){return Ku(t)?cr(t,gr(e,1,Ku,!0)):[]})),Bo=$r((function(t,e){var n=qo(e);return Ku(n)&&(n=i),Ku(t)?cr(t,gr(e,1,Ku,!0),oo(n,2)):[]})),Fo=$r((function(t,e){var n=qo(e);return Ku(n)&&(n=i),Ku(t)?cr(t,gr(e,1,Ku,!0),i,n):[]}));function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=dn(r+i,0)),De(t,oo(e,3),i)}function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ps(n),o=n<0?dn(r+o,0):yn(o,r-1)),De(t,oo(e,3),o,!0)}function zo(t){return null!=t&&t.length?gr(t,1):[]}function Vo(t){return t&&t.length?t[0]:i}var Ko=$r((function(t){var e=je(t,vi);return e.length&&e[0]===t[0]?Or(e):[]})),$o=$r((function(t){var e=qo(t),n=je(t,vi);return e===qo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Or(n,oo(e,2)):[]})),Jo=$r((function(t){var e=qo(t),n=je(t,vi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Or(n,i,e):[]}));function qo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Zo=$r(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var Yo=Xi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return zr(t,je(e,(function(t){return go(t,n)?+t:t})).sort(Ei)),r}));function Xo(t){return null==t?t:bn.call(t)}var tu=$r((function(t){return si(gr(t,1,Ku,!0))})),eu=$r((function(t){var e=qo(t);return Ku(e)&&(e=i),si(gr(t,1,Ku,!0),oo(e,2))})),nu=$r((function(t){var e=qo(t);return e="function"==typeof e?e:i,si(gr(t,1,Ku,!0),i,e)}));function ru(t){if(!t||!t.length)return[];var e=0;return t=Ae(t,(function(t){if(Ku(t))return e=dn(t.length,e),!0})),$e(e,(function(e){return je(t,He(e))}))}function iu(t,e){if(!t||!t.length)return[];var n=ru(t);return null==e?n:je(n,(function(t){return Ee(e,i,t)}))}var ou=$r((function(t,e){return Ku(t)?cr(t,e):[]})),uu=$r((function(t){return hi(Ae(t,Ku))})),su=$r((function(t){var e=qo(t);return Ku(e)&&(e=i),hi(Ae(t,Ku),oo(e,2))})),au=$r((function(t){var e=qo(t);return e="function"==typeof e?e:i,hi(Ae(t,Ku),i,e)})),cu=$r(ru),fu=$r((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,iu(t,n)}));function lu(t){var e=Dn(t);return e.__chain__=!0,e}function hu(t,e){return e(t)}var pu=Xi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Wn&&go(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:hu,args:[o],thisArg:i}),new Fn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),vu=Ai((function(t,e,n){xt.call(t,n)?++t[n]:rr(t,n,1)})),gu=Ri(Wo),du=Ri(Ho);function yu(t,e){return(Hu(t)?Ie:fr)(t,oo(e,3))}function _u(t,e){return(Hu(t)?Le:lr)(t,oo(e,3))}var mu=Ai((function(t,e,n){xt.call(t,n)?t[n].push(e):rr(t,n,[e])})),wu=$r((function(t,e,n){var i=-1,o="function"==typeof e,u=Vu(t)?r(t.length):[];return fr(t,(function(t){u[++i]=o?Ee(e,t,n):Ar(t,e,n)})),u})),bu=Ai((function(t,e,n){rr(t,n,e)}));function Su(t,e){return(Hu(t)?je:kr)(t,oo(e,3))}var Eu=Ai((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Cu=$r((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Fr(t,gr(e,1),[])})),Iu=ce||function(){return le.Date.now()};function Lu(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ji(t,c,i,i,i,i,e)}function Ou(t,e){var n;if("function"!=typeof e)throw new Ot(o);return t=ps(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Au=$r((function(t,e,n){var r=1;if(n.length){var i=sn(n,io(Au));r|=a}return Ji(t,r,e,n,i)})),Nu=$r((function(t,e,n){var r=3;if(n.length){var i=sn(n,io(Nu));r|=a}return Ji(e,r,t,n,i)}));function Tu(t,e,n){var r,u,s,a,c,f,l=0,h=!1,p=!1,v=!0;if("function"!=typeof t)throw new Ot(o);function g(e){var n=r,o=u;return r=u=i,l=e,a=t.apply(o,n)}function d(t){var n=t-f;return f===i||n>=e||n<0||p&&t-l>=s}function y(){var t=Iu();if(d(t))return _(t);c=Ao(y,function(t){var n=e-(t-f);return p?yn(n,s-(t-l)):n}(t))}function _(t){return c=i,v&&r?g(t):(r=u=i,a)}function m(){var t=Iu(),n=d(t);if(r=arguments,u=this,f=t,n){if(c===i)return function(t){return l=t,c=Ao(y,e),h?g(t):a}(f);if(p)return mi(c),c=Ao(y,e),g(f)}return c===i&&(c=Ao(y,e)),a}return e=gs(e)||0,Xu(n)&&(h=!!n.leading,s=(p="maxWait"in n)?dn(gs(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v),m.cancel=function(){c!==i&&mi(c),l=0,r=f=u=c=i},m.flush=function(){return c===i?a:_(Iu())},m}var ju=$r((function(t,e){return ar(t,1,e)})),Uu=$r((function(t,e,n){return ar(t,gs(e)||0,n)}));function xu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(xu.Cache||Vn),n}function Mu(t){if("function"!=typeof t)throw new Ot(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}xu.Cache=Vn;var Ru=yi((function(t,e){var n=(e=1==e.length&&Hu(e[0])?je(e[0],qe(oo())):je(gr(e,1),qe(oo()))).length;return $r((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ee(t,this,r)}))})),ku=$r((function(t,e){var n=sn(e,io(ku));return Ji(t,a,i,e,n)})),Pu=$r((function(t,e){var n=sn(e,io(Pu));return Ji(t,64,i,e,n)})),Du=Xi((function(t,e){return Ji(t,256,i,i,i,e)}));function Gu(t,e){return t===e||t!=t&&e!=e}var Bu=Hi(Cr),Fu=Hi((function(t,e){return t>=e})),Wu=Nr(function(){return arguments}())?Nr:function(t){return ts(t)&&xt.call(t,"callee")&&!Kt.call(t,"callee")},Hu=r.isArray,zu=ye?qe(ye):function(t){return ts(t)&&Er(t)==j};function Vu(t){return null!=t&&Yu(t.length)&&!Zu(t)}function Ku(t){return ts(t)&&Vu(t)}var $u=de||ga,Ju=_e?qe(_e):function(t){return ts(t)&&Er(t)==_};function qu(t){if(!ts(t))return!1;var e=Er(t);return e==m||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function Zu(t){if(!Xu(t))return!1;var e=Er(t);return e==w||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qu(t){return"number"==typeof t&&t==ps(t)}function Yu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function Xu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ts(t){return null!=t&&"object"==typeof t}var es=me?qe(me):function(t){return ts(t)&&lo(t)==S};function ns(t){return"number"==typeof t||ts(t)&&Er(t)==E}function rs(t){if(!ts(t)||Er(t)!=C)return!1;var e=zt(t);if(null===e)return!0;var n=xt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ut.call(n)==Pt}var is=we?qe(we):function(t){return ts(t)&&Er(t)==L},os=be?qe(be):function(t){return ts(t)&&lo(t)==O};function us(t){return"string"==typeof t||!Hu(t)&&ts(t)&&Er(t)==A}function ss(t){return"symbol"==typeof t||ts(t)&&Er(t)==N}var as=Se?qe(Se):function(t){return ts(t)&&Yu(t.length)&&!!ie[Er(t)]},cs=Hi(Rr),fs=Hi((function(t,e){return t<=e}));function ls(t){if(!t)return[];if(Vu(t))return us(t)?ln(t):Li(t);if(qt&&t[qt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[qt]());var e=lo(t);return(e==S?on:e==O?an:Gs)(t)}function hs(t){return t?(t=gs(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ps(t){var e=hs(t),n=e%1;return e==e?n?e-n:e:0}function vs(t){return t?or(ps(t),0,p):0}function gs(t){if("number"==typeof t)return t;if(ss(t))return h;if(Xu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Xu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=vt.test(t);return n||dt.test(t)?ae(t.slice(2),n?2:8):pt.test(t)?h:+t}function ds(t){return Oi(t,js(t))}function ys(t){return null==t?"":ui(t)}var _s=Ni((function(t,e){if(bo(e)||Vu(e))Oi(e,Ts(e),t);else for(var n in e)xt.call(e,n)&&Xn(t,n,e[n])})),ms=Ni((function(t,e){Oi(e,js(e),t)})),ws=Ni((function(t,e,n,r){Oi(e,js(e),t,r)})),bs=Ni((function(t,e,n,r){Oi(e,Ts(e),t,r)})),Ss=Xi(ir),Es=$r((function(t,e){t=Ct(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var u=e[n],s=js(u),a=-1,c=s.length;++a<c;){var f=s[a],l=t[f];(l===i||Gu(l,Tt[f])&&!xt.call(t,f))&&(t[f]=u[f])}return t})),Cs=$r((function(t){return t.push(i,Zi),Ee(xs,i,t)}));function Is(t,e,n){var r=null==t?i:br(t,e);return r===i?n:r}function Ls(t,e){return null!=t&&ho(t,e,Lr)}var Os=Di((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=kt.call(e)),t[e]=n}),Xs(na)),As=Di((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=kt.call(e)),xt.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Ns=$r(Ar);function Ts(t){return Vu(t)?Jn(t):Mr(t)}function js(t){return Vu(t)?Jn(t,!0):function(t){if(!Xu(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=bo(t),n=[];for(var r in t)("constructor"!=r||!e&&xt.call(t,r))&&n.push(r);return n}(t)}var Us=Ni((function(t,e,n){Gr(t,e,n)})),xs=Ni((function(t,e,n,r){Gr(t,e,n,r)})),Ms=Xi((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=di(e,t),r||(r=e.length>1),e})),Oi(t,eo(t),n),r&&(n=ur(n,7,Qi));for(var i=e.length;i--;)ai(n,e[i]);return n})),Rs=Xi((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return Ls(t,n)}))}(t,e)}));function ks(t,e){if(null==t)return{};var n=je(eo(t),(function(t){return[t]}));return e=oo(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var Ps=$i(Ts),Ds=$i(js);function Gs(t){return null==t?[]:Ze(t,Ts(t))}var Bs=xi((function(t,e,n){return e=e.toLowerCase(),t+(n?Fs(e):e)}));function Fs(t){return qs(ys(t).toLowerCase())}function Ws(t){return(t=ys(t))&&t.replace(_t,tn).replace(Qt,"")}var Hs=xi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),zs=xi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Vs=Ui("toLowerCase"),Ks=xi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),$s=xi((function(t,e,n){return t+(n?" ":"")+qs(e)})),Js=xi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),qs=Ui("toUpperCase");function Zs(t,e,n){return t=ys(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(at)||[]}(t):t.match(e)||[]}var Qs=$r((function(t,e){try{return Ee(t,i,e)}catch(t){return qu(t)?t:new bt(t)}})),Ys=Xi((function(t,e){return Ie(e,(function(e){e=ko(e),rr(t,e,Au(t[e],t))})),t}));function Xs(t){return function(){return t}}var ta=ki(),ea=ki(!0);function na(t){return t}function ra(t){return xr("function"==typeof t?t:ur(t,1))}var ia=$r((function(t,e){return function(n){return Ar(n,t,e)}})),oa=$r((function(t,e){return function(n){return Ar(t,n,e)}}));function ua(t,e,n){var r=Ts(e),i=wr(e,r);null!=n||Xu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Ts(e)));var o=!(Xu(n)&&"chain"in n&&!n.chain),u=Zu(t);return Ie(i,(function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Li(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ue([this.value()],arguments))})})),t}function sa(){}var aa=Bi(je),ca=Bi(Oe),fa=Bi(Re);function la(t){return _o(t)?He(ko(t)):function(t){return function(e){return br(e,t)}}(t)}var ha=Wi(),pa=Wi(!0);function va(){return[]}function ga(){return!1}var da,ya=Gi((function(t,e){return t+e}),0),_a=Vi("ceil"),ma=Gi((function(t,e){return t/e}),1),wa=Vi("floor"),ba=Gi((function(t,e){return t*e}),1),Sa=Vi("round"),Ea=Gi((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new Ot(o);return t=ps(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=Lu,Dn.assign=_s,Dn.assignIn=ms,Dn.assignInWith=ws,Dn.assignWith=bs,Dn.at=Ss,Dn.before=Ou,Dn.bind=Au,Dn.bindAll=Ys,Dn.bindKey=Nu,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hu(t)?t:[t]},Dn.chain=lu,Dn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:dn(ps(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var u=0,s=0,a=r(he(o/e));u<o;)a[s++]=ti(t,u,u+=e);return a},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ue(Hu(n)?Li(n):[n],gr(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Ot(o);return[n(t[0]),t[1]]})):[],$r((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ee(i[0],this,n))return Ee(i[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=Ts(t);return function(n){return sr(n,t,e)}}(ur(t,1))},Dn.constant=Xs,Dn.countBy=vu,Dn.create=function(t,e){var n=Gn(t);return null==e?n:nr(n,e)},Dn.curry=function t(e,n,r){var o=Ji(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Dn.curryRight=function t(e,n,r){var o=Ji(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Dn.debounce=Tu,Dn.defaults=Es,Dn.defaultsDeep=Cs,Dn.defer=ju,Dn.delay=Uu,Dn.difference=Go,Dn.differenceBy=Bo,Dn.differenceWith=Fo,Dn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ps(e))<0?0:e,r):[]},Dn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ps(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?fi(t,oo(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?fi(t,oo(e,3),!0):[]},Dn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ps(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ps(r))<0&&(r+=o),r=n>r?0:vs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Dn.filter=function(t,e){return(Hu(t)?Ae:vr)(t,oo(e,3))},Dn.flatMap=function(t,e){return gr(Su(t,e),1)},Dn.flatMapDeep=function(t,e){return gr(Su(t,e),f)},Dn.flatMapDepth=function(t,e,n){return n=n===i?1:ps(n),gr(Su(t,e),n)},Dn.flatten=zo,Dn.flattenDeep=function(t){return null!=t&&t.length?gr(t,f):[]},Dn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:ps(e)):[]},Dn.flip=function(t){return Ji(t,512)},Dn.flow=ta,Dn.flowRight=ea,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Dn.functions=function(t){return null==t?[]:wr(t,Ts(t))},Dn.functionsIn=function(t){return null==t?[]:wr(t,js(t))},Dn.groupBy=mu,Dn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Dn.intersection=Ko,Dn.intersectionBy=$o,Dn.intersectionWith=Jo,Dn.invert=Os,Dn.invertBy=As,Dn.invokeMap=wu,Dn.iteratee=ra,Dn.keyBy=bu,Dn.keys=Ts,Dn.keysIn=js,Dn.map=Su,Dn.mapKeys=function(t,e){var n={};return e=oo(e,3),_r(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},Dn.mapValues=function(t,e){var n={};return e=oo(e,3),_r(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},Dn.matches=function(t){return Pr(ur(t,1))},Dn.matchesProperty=function(t,e){return Dr(t,ur(e,1))},Dn.memoize=xu,Dn.merge=Us,Dn.mergeWith=xs,Dn.method=ia,Dn.methodOf=oa,Dn.mixin=ua,Dn.negate=Mu,Dn.nthArg=function(t){return t=ps(t),$r((function(e){return Br(e,t)}))},Dn.omit=Ms,Dn.omitBy=function(t,e){return ks(t,Mu(oo(e)))},Dn.once=function(t){return Ou(2,t)},Dn.orderBy=function(t,e,n,r){return null==t?[]:(Hu(e)||(e=null==e?[]:[e]),Hu(n=r?i:n)||(n=null==n?[]:[n]),Fr(t,e,n))},Dn.over=aa,Dn.overArgs=Ru,Dn.overEvery=ca,Dn.overSome=fa,Dn.partial=ku,Dn.partialRight=Pu,Dn.partition=Eu,Dn.pick=Rs,Dn.pickBy=ks,Dn.property=la,Dn.propertyOf=function(t){return function(e){return null==t?i:br(t,e)}},Dn.pull=Zo,Dn.pullAll=Qo,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,oo(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},Dn.pullAt=Yo,Dn.range=ha,Dn.rangeRight=pa,Dn.rearg=Du,Dn.reject=function(t,e){return(Hu(t)?Ae:vr)(t,Mu(oo(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var u=t[r];e(u,r,t)&&(n.push(u),i.push(r))}return zr(t,i),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new Ot(o);return $r(t,e=e===i?e:ps(e))},Dn.reverse=Xo,Dn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ps(e),(Hu(t)?Zn:qr)(t,e)},Dn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},Dn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Zr(t,e,n,r)},Dn.shuffle=function(t){return(Hu(t)?Qn:Xr)(t)},Dn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:ps(e),n=n===i?r:ps(n)),ti(t,e,n)):[]},Dn.sortBy=Cu,Dn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=ui(e))&&rn(t)?_i(ln(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new Ot(o);return e=null==e?0:dn(ps(e),0),$r((function(n){var r=n[e],i=_i(n,0,e);return r&&Ue(i,r),Ee(t,this,i)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ps(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ps(e)))<0?0:e,r):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?fi(t,oo(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?fi(t,oo(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ot(o);return Xu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Tu(t,e,{leading:r,maxWait:e,trailing:i})},Dn.thru=hu,Dn.toArray=ls,Dn.toPairs=Ps,Dn.toPairsIn=Ds,Dn.toPath=function(t){return Hu(t)?je(t,ko):ss(t)?[t]:Li(Ro(ys(t)))},Dn.toPlainObject=ds,Dn.transform=function(t,e,n){var r=Hu(t),i=r||$u(t)||as(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Xu(t)&&Zu(o)?Gn(zt(t)):{}}return(i?Ie:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},Dn.unary=function(t){return Lu(t,1)},Dn.union=tu,Dn.unionBy=eu,Dn.unionWith=nu,Dn.uniq=function(t){return t&&t.length?si(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},Dn.unset=function(t,e){return null==t||ai(t,e)},Dn.unzip=ru,Dn.unzipWith=iu,Dn.update=function(t,e,n){return null==t?t:ci(t,e,gi(n))},Dn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,gi(n),r)},Dn.values=Gs,Dn.valuesIn=function(t){return null==t?[]:Ze(t,js(t))},Dn.without=ou,Dn.words=Zs,Dn.wrap=function(t,e){return ku(gi(e),t)},Dn.xor=uu,Dn.xorBy=su,Dn.xorWith=au,Dn.zip=cu,Dn.zipObject=function(t,e){return pi(t||[],e||[],Xn)},Dn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Zr)},Dn.zipWith=fu,Dn.entries=Ps,Dn.entriesIn=Ds,Dn.extend=ms,Dn.extendWith=ws,ua(Dn,Dn),Dn.add=ya,Dn.attempt=Qs,Dn.camelCase=Bs,Dn.capitalize=Fs,Dn.ceil=_a,Dn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=gs(n))==n?n:0),e!==i&&(e=(e=gs(e))==e?e:0),or(gs(t),e,n)},Dn.clone=function(t){return ur(t,4)},Dn.cloneDeep=function(t){return ur(t,5)},Dn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:i)},Dn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:i)},Dn.conformsTo=function(t,e){return null==e||sr(t,e,Ts(e))},Dn.deburr=Ws,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=ma,Dn.endsWith=function(t,e,n){t=ys(t),e=ui(e);var r=t.length,o=n=n===i?r:or(ps(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Dn.eq=Gu,Dn.escape=function(t){return(t=ys(t))&&J.test(t)?t.replace(K,en):t},Dn.escapeRegExp=function(t){return(t=ys(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Dn.every=function(t,e,n){var r=Hu(t)?Oe:hr;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},Dn.find=gu,Dn.findIndex=Wo,Dn.findKey=function(t,e){return Pe(t,oo(e,3),_r)},Dn.findLast=du,Dn.findLastIndex=Ho,Dn.findLastKey=function(t,e){return Pe(t,oo(e,3),mr)},Dn.floor=wa,Dn.forEach=yu,Dn.forEachRight=_u,Dn.forIn=function(t,e){return null==t?t:dr(t,oo(e,3),js)},Dn.forInRight=function(t,e){return null==t?t:yr(t,oo(e,3),js)},Dn.forOwn=function(t,e){return t&&_r(t,oo(e,3))},Dn.forOwnRight=function(t,e){return t&&mr(t,oo(e,3))},Dn.get=Is,Dn.gt=Bu,Dn.gte=Fu,Dn.has=function(t,e){return null!=t&&ho(t,e,Ir)},Dn.hasIn=Ls,Dn.head=Vo,Dn.identity=na,Dn.includes=function(t,e,n,r){t=Vu(t)?t:Gs(t),n=n&&!r?ps(n):0;var i=t.length;return n<0&&(n=dn(i+n,0)),us(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ge(t,e,n)>-1},Dn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=dn(r+i,0)),Ge(t,e,i)},Dn.inRange=function(t,e,n){return e=hs(e),n===i?(n=e,e=0):n=hs(n),function(t,e,n){return t>=yn(e,n)&&t<dn(e,n)}(t=gs(t),e,n)},Dn.invoke=Ns,Dn.isArguments=Wu,Dn.isArray=Hu,Dn.isArrayBuffer=zu,Dn.isArrayLike=Vu,Dn.isArrayLikeObject=Ku,Dn.isBoolean=function(t){return!0===t||!1===t||ts(t)&&Er(t)==y},Dn.isBuffer=$u,Dn.isDate=Ju,Dn.isElement=function(t){return ts(t)&&1===t.nodeType&&!rs(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(Vu(t)&&(Hu(t)||"string"==typeof t||"function"==typeof t.splice||$u(t)||as(t)||Wu(t)))return!t.length;var e=lo(t);if(e==S||e==O)return!t.size;if(bo(t))return!Mr(t).length;for(var n in t)if(xt.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return Tr(t,e)},Dn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Tr(t,e,i,n):!!r},Dn.isError=qu,Dn.isFinite=function(t){return"number"==typeof t&&ke(t)},Dn.isFunction=Zu,Dn.isInteger=Qu,Dn.isLength=Yu,Dn.isMap=es,Dn.isMatch=function(t,e){return t===e||jr(t,e,so(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,jr(t,e,so(e),n)},Dn.isNaN=function(t){return ns(t)&&t!=+t},Dn.isNative=function(t){if(wo(t))throw new bt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ur(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=ns,Dn.isObject=Xu,Dn.isObjectLike=ts,Dn.isPlainObject=rs,Dn.isRegExp=is,Dn.isSafeInteger=function(t){return Qu(t)&&t>=-9007199254740991&&t<=l},Dn.isSet=os,Dn.isString=us,Dn.isSymbol=ss,Dn.isTypedArray=as,Dn.isUndefined=function(t){return t===i},Dn.isWeakMap=function(t){return ts(t)&&lo(t)==T},Dn.isWeakSet=function(t){return ts(t)&&"[object WeakSet]"==Er(t)},Dn.join=function(t,e){return null==t?"":ze.call(t,e)},Dn.kebabCase=Hs,Dn.last=qo,Dn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ps(n))<0?dn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):De(t,Fe,o,!0)},Dn.lowerCase=zs,Dn.lowerFirst=Vs,Dn.lt=cs,Dn.lte=fs,Dn.max=function(t){return t&&t.length?pr(t,na,Cr):i},Dn.maxBy=function(t,e){return t&&t.length?pr(t,oo(e,2),Cr):i},Dn.mean=function(t){return We(t,na)},Dn.meanBy=function(t,e){return We(t,oo(e,2))},Dn.min=function(t){return t&&t.length?pr(t,na,Rr):i},Dn.minBy=function(t,e){return t&&t.length?pr(t,oo(e,2),Rr):i},Dn.stubArray=va,Dn.stubFalse=ga,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=ba,Dn.nth=function(t,e){return t&&t.length?Br(t,ps(e)):i},Dn.noConflict=function(){return le._===this&&(le._=Dt),this},Dn.noop=sa,Dn.now=Iu,Dn.pad=function(t,e,n){t=ys(t);var r=(e=ps(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Fi(pe(i),n)+t+Fi(he(i),n)},Dn.padEnd=function(t,e,n){t=ys(t);var r=(e=ps(e))?fn(t):0;return e&&r<e?t+Fi(e-r,n):t},Dn.padStart=function(t,e,n){t=ys(t);var r=(e=ps(e))?fn(t):0;return e&&r<e?Fi(e-r,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),mn(ys(t).replace(rt,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=hs(t),e===i?(e=t,t=0):e=hs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return yn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Vr(t,e)},Dn.reduce=function(t,e,n){var r=Hu(t)?xe:Ve,i=arguments.length<3;return r(t,oo(e,4),n,i,fr)},Dn.reduceRight=function(t,e,n){var r=Hu(t)?Me:Ve,i=arguments.length<3;return r(t,oo(e,4),n,i,lr)},Dn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ps(e),Kr(ys(t),e)},Dn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var r=-1,o=(e=di(e,t)).length;for(o||(o=1,t=i);++r<o;){var u=null==t?i:t[ko(e[r])];u===i&&(r=o,u=n),t=Zu(u)?u.call(t):u}return t},Dn.round=Sa,Dn.runInContext=t,Dn.sample=function(t){return(Hu(t)?qn:Jr)(t)},Dn.size=function(t){if(null==t)return 0;if(Vu(t))return us(t)?fn(t):t.length;var e=lo(t);return e==S||e==O?t.size:Mr(t).length},Dn.snakeCase=Ks,Dn.some=function(t,e,n){var r=Hu(t)?Re:ei;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},Dn.sortedIndex=function(t,e){return ni(t,e)},Dn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Gu(t[r],e))return r}return-1},Dn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Gu(t[n],e))return n}return-1},Dn.startCase=$s,Dn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:or(ps(n),0,t.length),e=ui(e),t.slice(n,n+e.length)==e},Dn.subtract=Ea,Dn.sum=function(t){return t&&t.length?Ke(t,na):0},Dn.sumBy=function(t,e){return t&&t.length?Ke(t,oo(e,2)):0},Dn.template=function(t,e,n){var r=Dn.templateSettings;n&&yo(t,e,n)&&(e=i),t=ys(t),e=ws({},e,r,qi);var o,u,s=ws({},e.imports,r.imports,qi),a=Ts(s),c=Ze(s,a),f=0,l=e.interpolate||mt,h="__p += '",p=It((e.escape||mt).source+"|"+l.source+"|"+(l===Q?lt:mt).source+"|"+(e.evaluate||mt).source+"|$","g"),v="//# sourceURL="+(xt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(p,(function(e,n,r,i,s,a){return r||(r=i),h+=t.slice(f,a).replace(wt,nn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(u=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=a+e.length,e})),h+="';\n";var g=xt.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new bt("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(u?h.replace(W,""):h).replace(H,"$1").replace(z,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var d=Qs((function(){return St(a,v+"return "+h).apply(i,c)}));if(d.source=h,qu(d))throw d;return d},Dn.times=function(t,e){if((t=ps(t))<1||t>l)return[];var n=p,r=yn(t,p);e=oo(e),t-=p;for(var i=$e(r,e);++n<t;)e(n);return i},Dn.toFinite=hs,Dn.toInteger=ps,Dn.toLength=vs,Dn.toLower=function(t){return ys(t).toLowerCase()},Dn.toNumber=gs,Dn.toSafeInteger=function(t){return t?or(ps(t),-9007199254740991,l):0===t?t:0},Dn.toString=ys,Dn.toUpper=function(t){return ys(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=ys(t))&&(n||e===i))return Je(t);if(!t||!(e=ui(e)))return t;var r=ln(t),o=ln(e);return _i(r,Ye(r,o),Xe(r,o)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.slice(0,hn(t)+1);if(!t||!(e=ui(e)))return t;var r=ln(t);return _i(r,0,Xe(r,ln(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ui(e)))return t;var r=ln(t);return _i(r,Ye(r,ln(e))).join("")},Dn.truncate=function(t,e){var n=30,r="...";if(Xu(e)){var o="separator"in e?e.separator:o;n="length"in e?ps(e.length):n,r="omission"in e?ui(e.omission):r}var u=(t=ys(t)).length;if(rn(t)){var s=ln(t);u=s.length}if(n>=u)return t;var a=n-fn(r);if(a<1)return r;var c=s?_i(s,0,a).join(""):t.slice(0,a);if(o===i)return c+r;if(s&&(a+=c.length-a),is(o)){if(t.slice(a).search(o)){var f,l=c;for(o.global||(o=It(o.source,ys(ht.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var h=f.index;c=c.slice(0,h===i?a:h)}}else if(t.indexOf(ui(o),a)!=a){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Dn.unescape=function(t){return(t=ys(t))&&$.test(t)?t.replace(V,pn):t},Dn.uniqueId=function(t){var e=++Mt;return ys(t)+e},Dn.upperCase=Js,Dn.upperFirst=qs,Dn.each=yu,Dn.eachRight=_u,Dn.first=Vo,ua(Dn,(da={},_r(Dn,(function(t,e){xt.call(Dn.prototype,e)||(da[e]=t)})),da),{chain:!1}),Dn.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),Ie(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){n=n===i?1:dn(ps(n),0);var r=this.__filtered__&&!e?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(na)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=$r((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return Ar(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Mu(oo(t)))},Wn.prototype.slice=function(t,e){t=ps(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ps(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(p)},_r(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Dn[r?"take"+("last"==e?"Right":""):e],u=r||/^find/.test(e);o&&(Dn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,a=e instanceof Wn,c=s[0],f=a||Hu(e),l=function(t){var e=o.apply(Dn,Ue([t],s));return r&&h?e[0]:e};f&&n&&"function"==typeof c&&1!=c.length&&(a=f=!1);var h=this.__chain__,p=!!this.__actions__.length,v=u&&!h,g=a&&!p;if(!u&&f){e=g?e:new Wn(this);var d=t.apply(e,s);return d.__actions__.push({func:hu,args:[l],thisArg:i}),new Fn(d,h)}return v&&g?t.apply(this,s):(d=this.thru(l),v?r?d.value()[0]:d.value():d)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=At[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hu(i)?i:[],t)}return this[n]((function(n){return e.apply(Hu(n)?n:[],t)}))}})),_r(Wn.prototype,(function(t,e){var n=Dn[e];if(n){var r=n.name+"";xt.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:e,func:n})}})),Nn[Pi(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Li(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Li(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Li(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=yn(e,t+u);break;case"takeRight":t=dn(t,e-u)}}return{start:t,end:e}}(0,i,this.__views__),u=o.start,s=o.end,a=s-u,c=r?s:u-1,f=this.__iteratees__,l=f.length,h=0,p=yn(a,this.__takeCount__);if(!n||!r&&i==a&&p==a)return li(t,this.__actions__);var v=[];t:for(;a--&&h<p;){for(var g=-1,d=t[c+=e];++g<l;){var y=f[g],_=y.iteratee,m=y.type,w=_(d);if(2==m)d=w;else if(!w){if(1==m)continue t;break t}}v[h++]=d}return v},Dn.prototype.at=pu,Dn.prototype.chain=function(){return lu(this)},Dn.prototype.commit=function(){return new Fn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===i&&(this.__values__=ls(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof Bn;){var r=Do(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:hu,args:[Xo],thisArg:i}),new Fn(e,this.__chain__)}return this.thru(Xo)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return li(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,qt&&(Dn.prototype[qt]=function(){return this}),Dn}();le._=vn,(r=function(){return vn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)}},p={};function v(t){var e=p[t];if(void 0!==e)return e.exports;var n=p[t]={id:t,loaded:!1,exports:{}};return h[t].call(n.exports,n,n.exports,v),n.loaded=!0,n.exports}v.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return v.d(e,{a:e}),e},v.d=(t,e)=>{for(var n in e)v.o(e,n)&&!v.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},v.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof a)return a}}(),v.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),v.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var g={};(()=>{v.d(g,{n6:()=>Pt,bJ:()=>Rt,hD:()=>Dt});var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){u.label=s[1];break}if(6===s[0]&&u.label<i[1]){u.label=i[1],i=s;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(s);break}i[2]&&u.ops.pop(),u.trys.pop();continue}s=e.call(t,u)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}Object.create,Object.create;var s,c,f,h,p=v(204),d=v.n(p),y=v(889),_=0,m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],w=a.WebSocket,b=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(){return S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)},E={wv:"im:0,au:0,sy:0"},C={canSendBeforeAuth:!1,timeout:6e4};!function(t){t[t.LWP_AUTH_NOT_READY=510]="LWP_AUTH_NOT_READY",t[t.CONNECT_UNAVAILABLE=511]="CONNECT_UNAVAILABLE",t[t.LOCAL_TIMEOUT=508]="LOCAL_TIMEOUT"}(s||(s={})),function(t){t[t.NOT_AUTHED=401]="NOT_AUTHED",t[t.HANDLER_NOT_FOUND=400]="HANDLER_NOT_FOUND",t[t.TIMEOUT=408]="TIMEOUT",t[t.BIZ_ERR=500]="BIZ_ERR"}(c||(c={})),function(t){t[t.INITED=0]="INITED",t[t.CONNECTING=1]="CONNECTING",t[t.SILENT_CONNECTING=2]="SILENT_CONNECTING",t[t.OPENED=3]="OPENED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"}(f||(f={})),function(t){t[t.INITED=0]="INITED",t[t.REGED=1]="REGED",t[t.REG_FAILED=2]="REG_FAILED",t[t.SUBSCRIBING=3]="SUBSCRIBING",t[t.SUBSCRIBED=4]="SUBSCRIBED",t[t.REFRESH_TOKEN=5]="REFRESH_TOKEN",t[t.SUBSCRIBE_FAILED=6]="SUBSCRIBE_FAILED"}(h||(h={}));var I=function(t){function e(e,n){var r=t.call(this)||this;return r.name=e,r.option=n,r.pendingMsgs={},r.waitingReconnectMsgs={},r.msgTimerCache={},r.authState=h.INITED,r.connectState=f.CLOSED,r.localLog=n.log,r.tryConnectTime=0,r.isConnecting=!1,r.pushHandlerCache={},r.lwpDefaultHeaders=n.lwpHeadersConfig||E,r.paasDomain="",r}return b(e,t),e.prototype.connect=function(){this.setConnectState(f.INITED),this.setAuthState(h.INITED),this.tryConnectTime=0,this._connect()},e.prototype.setCloundPaasSign=function(t){this.lwpDefaultHeaders.sign=t},e.prototype.setAuthInfo=function(t){return this.authState===h.SUBSCRIBE_FAILED?(this.authInfo=t,this.auth()):Promise.reject("auth state is not subscribe_failed when set auth info")},e.prototype.getPaasDomain=function(){return this.paasDomain},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.getClientOption=function(){return Object.assign({},this.option)},e.prototype.clearAuthInfo=function(){this.authInfo=void 0,!0!==this.option.disableWsAuthConnect?this._connect():this.pingTimer&&clearTimeout(this.pingTimer),this.setAuthState(h.INITED)},e.prototype.initDevicePush=function(){return this.sendMsg("/reg/init",{},null,{canSendBeforeAuth:!0})},e.prototype.registerPushHandler=function(t,e){if(this.pushHandlerCache[t])throw new Error("you have register this topic before: "+t);this.pushHandlerCache[t]=e},e.prototype.removePushHandler=function(t){delete this.pushHandlerCache[t]},e.prototype.close=function(){this.setConnectState(f.CLOSED),this.wsInstance&&this.wsInstance.close()},e.prototype.sendMsg=function(t,e,n,r){var i=this;void 0===e&&(e={}),void 0===r&&(r=C);var o,u,a,c=Object.assign({},e,{mid:(o=Math.floor(Math.random()*Math.pow(2,16)),u=_++,a="",a+=m[o>>12&15],a+=m[o>>8&15],a+=m[o>>4&15],a+=m[15&o],a+=m[u>>12&15],a+=m[u>>8&15],a+=m[u>>4&15],(a+=m[15&u])+" 0")}),l=this.getMsgId(c.mid),p=!1;!0===r.canSendBeforeReg?p=!0:!0!==r.canSendBeforeAuth||this.authState!==h.REGED&&this.authState!==h.SUBSCRIBING&&this.authState!==h.SUBSCRIBE_FAILED&&this.authState!==h.SUBSCRIBED?this.authState===h.SUBSCRIBED&&(p=!0):p=!0;var v={lwp:t,headers:c,body:n,option:r};return new Promise((function(t,e){if(p)if(i.connectState===f.OPENED){try{i.sendRawMsg({lwp:v.lwp,headers:v.headers,body:v.body}),i.pendingMsgs[l]={request:v,resolve:t,reject:e}}catch(n){i.waitingReconnectMsgs[l]={request:v,resolve:t,reject:e}}i.setupTimeoutTimer(l,v.option.timeout)}else i.connectState===f.SILENT_CONNECTING?(i.waitingReconnectMsgs[l]={request:v,resolve:t,reject:e},i.setupTimeoutTimer(l,v.option.timeout)):e({code:s.CONNECT_UNAVAILABLE,body:{reason:"connect is unavailable"}});else e({code:s.LWP_AUTH_NOT_READY,body:{reason:"lwp auth not ready"}})}))},e.prototype.sendRawMsg=function(t){if(!this.wsInstance)throw new Error("wsInstance is not exist");this.wsInstance.send(JSON.stringify({code:t.code,lwp:t.lwp,headers:t.headers,body:t.body}))},e.prototype.flushWaitingMsgs=function(){var t=this,e=Object.keys(this.waitingReconnectMsgs);e.length&&e.forEach((function(e){var n=t.waitingReconnectMsgs[e];if(n){var r=n.request,i=n.resolve,o=n.reject,u=r.lwp,s=r.headers,a=r.body,c=r.option;delete t.waitingReconnectMsgs[e],t.sendMsg(u,s,a,c).then(i,o)}}))},e.prototype.rejectPendingMsgs=function(){var t=this,e=Object.keys(this.pendingMsgs);e.length&&e.forEach((function(e){var n=t.pendingMsgs[e];if(n){n.reject({code:s.CONNECT_UNAVAILABLE,body:{reason:"connect is unavailable"}});var r=t.msgTimerCache[e];r&&clearTimeout(r),delete t.msgTimerCache[e],delete t.pendingMsgs[e]}}))},e.prototype.setupTimeoutTimer=function(t,e){var n=this;e||(e=C.timeout),e<0&&(e=C.timeout),e>36e5&&(e=36e5);var r={code:s.LOCAL_TIMEOUT,body:{reason:"timeout by local"}},i=setTimeout((function(){var e=n.pendingMsgs[t],i=n.waitingReconnectMsgs[t];e&&e.reject(r),i&&i.reject(r),delete n.pendingMsgs[t],delete n.waitingReconnectMsgs[t],delete n.msgTimerCache[t]}),e);this.msgTimerCache[t]=i},e.prototype._connect=function(){var t=this;this.connectState!==f.CLOSED&&this.connectState!==f.CLOSING&&!0!==this.isConnecting&&(this.isConnecting=!0,this.tryConnectTime<5?this.setConnectState(f.SILENT_CONNECTING):this.setConnectState(f.CONNECTING),this.openWs().then((function(e){t.isConnecting=!1,t.wsInstance=e,t.bindWSEvent(e),t.setConnectState(f.OPENED),t.reg(),t.tryConnectTimer&&clearTimeout(t.tryConnectTimer)})).catch((function(e){t.isConnecting=!1,t.localLog.error("lwp client",t.name,"open ws error",e),t.tryConnectTime++,t.tryConnectTimer&&clearTimeout(t.tryConnectTimer),t.tryConnectTimer=setTimeout((function(){t._connect()}),Math.min(100*Math.pow(2,t.tryConnectTime),5e3))})))},e.prototype.reg=function(){var t=this,e=S({"cache-header":"token app-key did ua vhost wv scm_project",vhost:"WK",ua:this.option.ua,"app-key":this.option.appKey,did:this.option.deviceId,dt:"j"},this.lwpDefaultHeaders);this.option.scmProject&&(e.scm_project=this.option.scmProject),!0!==this.option.paasProject&&void 0!==e.sign&&delete e.sign,!0===this.option.isAssistant&&(e.token=this.option.accessToken||"",e.subscribe="false"),this.localLog.info("lwpclient",this.name,"start reg"),this.sendMsg("/reg",e,null,{canSendBeforeReg:!0,timeout:15e3}).then((function(){t.authState!==h.SUBSCRIBED&&t.setAuthState(h.REGED),t.localLog.info("lwpclinet",t.name,"reg success"),!0!==t.option.isAssistant?(!0!==t.option.paasProject&&t.initDevicePush(),t.auth().catch((function(){!0!==t.option.paasProject&&t.localLog.info("lwpclinet",t.name,"auth fail")}))):t.flushWaitingMsgs()})).catch((function(e){!0!==t.option.isAssistant||!e||400!==e.code&&401!==e.code?t.setAuthState(h.REG_FAILED):t.setAuthState(h.REGED),t.localLog.error("lwpclinet",t.name,"reg fail",JSON.stringify(e),e.stack)}))},e.prototype.auth=function(){var t=this;if(this.setAuthState(h.SUBSCRIBING),this.authInfo){var e=S({token:this.authInfo.accessToken,sync:"0,0;0;0;","set-ver":"0",dt:"j"},this.lwpDefaultHeaders);return!0===this.option.paasProject?delete e["set-ver"]:void 0!==e.sign&&delete e.sign,this.sendMsg("/reg",e,null,{canSendBeforeAuth:!0}).then((function(e){t.option.paasProject&&e&&e.headers&&e.headers["reg-uid"]&&(t.paasDomain=e.headers["reg-uid"].split("@")[1]),t.setAuthState(h.SUBSCRIBED),t.flushWaitingMsgs()})).catch((function(e){return t.setAuthState(h.SUBSCRIBE_FAILED),t.flushWaitingMsgs(),Promise.reject(e)}))}return this.setAuthState(h.SUBSCRIBE_FAILED),this.flushWaitingMsgs(),Promise.reject("auth info is null")},e.prototype.bindWSEvent=function(t){var e=this;t.onmessage=function(t){e.receiveMsgEvent(t)},t.onclose=function(n){e.wsInstance===t&&(!0!==e.option.disableWsAuthConnect?e._connect():e.clearAuthInfo())},t.onerror=function(t){e.localLog.error("lwpclient onerror",t)}},e.prototype.getMsgId=function(t){return t.split(" ")[0]},e.prototype.receiveMsgEvent=function(t){var e,n=this;if("string"==typeof t.data){try{e=JSON.parse(t.data)}catch(e){return void this.localLog.error("lwpclient: ",this.name+" parse json error :"+t.data)}if(e.code&&e.headers){var r=Object.assign({},e),i=(r.headers&&r.headers.mid||"").split(" ")[0],o=this.pendingMsgs[i];if(o){if(102===r.code)return o.reponseBodyList||(o.reponseBodyList=[]),void o.reponseBodyList.push(r.body);200===r.code?o.reponseBodyList&&o.reponseBodyList.length?o.resolve(S(S({},r),{reponseBodyList:o.reponseBodyList})):o.resolve(r):o.reject(r);var u=this.msgTimerCache[i];u&&clearTimeout(u),delete this.msgTimerCache[i],delete this.pendingMsgs[i]}}else if(e.lwp&&e.headers){var s=Object.assign({},e),a=s.lwp,f=s.headers.mid,l=this.pushHandlerCache[a],h=function(t){var e=Object.assign({},t.headers||{},{mid:f});n.sendRawMsg({code:t.code,headers:e,body:t.body})};l?l(s).then((function(t){h(t)})).catch((function(t){h({code:c.BIZ_ERR,headers:{},body:null})})):h("/s/msg"===a?{code:200,headers:{},body:{}}:{code:c.HANDLER_NOT_FOUND,headers:{},body:null})}else this.localLog.error("receive unexpected msg: "+t.data)}this.pingTimer&&clearTimeout(this.pingTimer),this.pingTimer=setTimeout((function(){n.ping()}),15e3)},e.prototype.ping=function(){var t=this;this.sendMsg("/!",{},null,{timeout:1e4,canSendBeforeReg:!0}).then((function(){}),(function(e){t.localLog.info("lwpclient","ws: "+t.name+"ping 检查失败 :",e),t.authState!==h.INITED&&(t.rejectPendingMsgs(),t._connect())}))},e.prototype.openWs=function(){var t=this;return new Promise((function(e,n){var r,i,o=setTimeout((function(){n(new Error("timeout"))}),5e3);try{i=t.option.wsUrl,t.option.ua,r=new w(i)}catch(t){return void n(t)}r.onopen=function(){clearTimeout(o),e(r)},r.onclose=function(t){clearTimeout(o),n(new Error(t.reason))},r.onerror=function(t){clearTimeout(o),n(new Error(JSON.stringify(t)))}}))},e.prototype.setAuthState=function(t){t!==this.authState&&(this.authState=t,this.emit(e.EventsName.AuthStateChange,t))},e.prototype.setConnectState=function(t){t!==this.connectState&&(this.connectState=t,this.emit(e.EventsName.ConnectStateChange,t))},e.EventsName={AuthStateChange:"AuthStateChange",ConnectStateChange:"ConnectStateChange"},e}(d().EventEmitter);let L=null;const O=()=>L,A=()=>{if(!L)throw new Error("must connect after init");L.connect()},N=new class{constructor(t){this.handlePush=t=>{let e=Promise.resolve();if(t.body&&t.body[1]&&t.body[1][6]){const n=t.body[1][6];Array.isArray(n)&&n.length>0&&(e=n.reduce(((t,e)=>t.then((()=>{const t=e[1],n=e[2],r=this.syncHandlers[t+""];return r?r((0,y.decodeFromB64)(n)):void 0}))),e))}return e.then((()=>({code:200,headers:{},body:null})))},this.topicName=t,this.syncHandlers={}}registerSyncItemHandler(t,e){this.syncHandlers[t+""]=e}clearSyncItemHandler(t){this.syncHandlers[t+""]=void 0}}("/s/syncDev");let T=!1;const j=t=>{(()=>{const t=O();if(!t)throw new Error("initDeviceSync must after initLWPClient");!1===T&&(t.registerPushHandler(N.topicName,N.handlePush),T=!0)})();const e=O();return e?e.setAuthInfo({accessToken:t.accessToken,refreshToken:t.refreshToken,expiredTime:t.accessTokenExpiredTime,openId:t.openId}).then((()=>({success:!0,openId:t.openId,authInfo:{accessToken:t.accessToken,refreshToken:t.refreshToken,expiredTime:t.accessTokenExpiredTime}}))):Promise.resolve({success:!1,reason:"lwp client is null",errorCode:"10001"})};var U;!function(t){t[t.NOT_LOGINED=0]="NOT_LOGINED",t[t.LOGINED=1]="LOGINED"}(U||(U={})),U.NOT_LOGINED;class x extends d().EventEmitter{constructor(){super(),this.client=null,this.EventsName={LoginStatusChange:"LoginStatusChange"},this._loginResult={status:U.NOT_LOGINED,openId:null},this.init()}get loginResult(){return this._loginResult}init(){if(this.client=O(),!this.client)throw new Error("cannot find client when init LoginStatus module");{const t=this.getNewLoginResult(this.client.authState);this._loginResult=t,this.client.addListener(I.EventsName.AuthStateChange,(t=>{const e=this.getNewLoginResult(t);e.status!==this._loginResult.status&&(this._loginResult=e,this.emit(this.EventsName.LoginStatusChange,this._loginResult))}))}}getNewLoginResult(t){if(this.transformLoginStatus(t)===U.LOGINED&&this.client){const t=this.client.getAuthInfo();if(t&&t.openId)return{status:U.LOGINED,openId:t.openId};throw new Error("lwpclient authstate is subscribed, but no openid in authInfo")}return{status:U.NOT_LOGINED,openId:null}}transformLoginStatus(t){return t===h.SUBSCRIBED?U.LOGINED:U.NOT_LOGINED}}var M,R=new Uint8Array(16);function k(){if(!M&&!(M=void 0!==l&&l.getRandomValues&&l.getRandomValues.bind(l)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M(R)}const P=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var D=[],G=0;G<256;++G)D.push((G+256).toString(16).substr(1));const B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(D[t[e+0]]+D[t[e+1]]+D[t[e+2]]+D[t[e+3]]+"-"+D[t[e+4]]+D[t[e+5]]+"-"+D[t[e+6]]+D[t[e+7]]+"-"+D[t[e+8]]+D[t[e+9]]+"-"+D[t[e+10]]+D[t[e+11]]+D[t[e+12]]+D[t[e+13]]+D[t[e+14]]+D[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&P.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n},F=function(t,e,n){var r=(t=t||{}).random||(t.rng||k)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return B(r)};var W,H,z=v(392);(H=W||(W={})).PaaSConnectionChanged="paas_connection_changed",H.PaaSConnectionError="paas_connection_error",H.PaaSAuthStateChanged="paas_authState_changed",H.LWPConnectStateChange="LWPConnectStateChange",H.PaasACK="paas_ack",H.PaaSOtherEvent="paas_event_others";var V,K=function(){return K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},K.apply(this,arguments)};function $(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function J(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var q,Z,Q,Y=function(t,e,n){if(V&&V.sendMsg)return V.sendMsg(t,e,n);throw new Error("rpc is null, must init rpc first")};!function(t){t[t.CONN_UNCONNECTED=0]="CONN_UNCONNECTED",t[t.CONN_CONNECTING=1]="CONN_CONNECTING",t[t.CONN_CONNECTED=2]="CONN_CONNECTED",t[t.CONN_AUTHING=3]="CONN_AUTHING",t[t.CONN_AUTHED=4]="CONN_AUTHED",t[t.CONN_ERROR=5]="CONN_ERROR"}(q||(q={})),function(t){t[t.INITED=0]="INITED",t[t.REGED=1]="REGED",t[t.REG_FAILED=2]="REG_FAILED",t[t.SUBSCRIBING=3]="SUBSCRIBING",t[t.SUBSCRIBED=4]="SUBSCRIBED",t[t.REFRESH_TOKEN=5]="REFRESH_TOKEN",t[t.SUBSCRIBE_FAILED=6]="SUBSCRIBE_FAILED"}(Z||(Z={})),function(t){t[t.INITED=0]="INITED",t[t.CONNECTING=1]="CONNECTING",t[t.SILENT_CONNECTING=2]="SILENT_CONNECTING",t[t.OPENED=3]="OPENED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"}(Q||(Q={}));var X,tt=function(){function t(){var t=this;this.innerConnectionStatus=q.CONN_UNCONNECTED,this.innerAuthState=Z.INITED,this.lwpClient=null,this.ua="",this.domain="",a&&a.navigator?this.ua=a.navigator.userAgent:uni?uni.getSystemInfo({success:function(e){t.ua="".concat(e.osName," ").concat(e.osVersion||""," ").concat(e.deviceType)}}):wx&&wx.getSystemInfo({success:function(e){t.ua="".concat(e.system," wechat ").concat(e.version||""," ").concat(e.model||"")}})}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},Object.defineProperty(t.prototype,"ConnectionStatus",{get:function(){return this.innerConnectionStatus},set:function(t){this.innerConnectionStatus=t,Tt.getEventService().emit(W.PaaSConnectionChanged,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AuthState",{get:function(){return this.innerAuthState},set:function(t){this.innerAuthState=t,Tt.getEventService().emit(W.PaaSAuthStateChanged,t)},enumerable:!1,configurable:!0}),t.prototype.isNetworkAvailable=function(){return!0},t.prototype.getConnectionStatus=function(){return this.ConnectionStatus},t.prototype.authState=function(){return this.AuthState},t.prototype.sendMsg=function(t,e,n){return $(this,void 0,void 0,(function(){var r;return J(this,(function(i){return this.lwpClient?(r=Date.now(),[2,this.lwpClient.sendMsg(t,e,n,{timeout:15e3}).catch((function(e){var n=Date.now()-r;return Tt.getLoggerService().error(X.ERROR,"[rpc] catch ".concat(n,"ms"),t,e),e&&e.code&&(510===e.code||511===e.code)&&Tt.getEventService().emit(W.PaaSConnectionError,e.code),Promise.reject(e)}))]):[2,Promise.reject("lwpClient is null")]}))}))},t.prototype.login=function(t){return $(this,void 0,void 0,(function(){var e,n,r,i,o,u=this;return J(this,(function(s){return(e=Tt.getSettingService().get()).debug,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["debug"]),r=0,i=!0,this.lwpClient?(A(),console.log("存在lwpClient，调用了lwpConnect"),this.ConnectionStatus=q.CONN_CONNECTED,[2]):(this.ConnectionStatus=q.CONN_CONNECTING,o={appKey:n.appKey,wsUrl:n.wsUrl||"wss://wss.im.dingtalk.cn",ua:"".concat(this.ua," AppName/VPaasSDK AppVer/").concat(Tt.getAppVersion()),deviceId:n.deviceId,lwpHeadersConfig:{wv:"im:3,au:3,sy:6"},log:n.log,disableWsAuthConnect:!0,paasProject:!0},n.subscribeServerPush&&o.lwpHeadersConfig&&(o.lwpHeadersConfig["subscribe-server-push"]=n.subscribeServerPush),this.ConnectionStatus=q.CONN_AUTHING,((t,e)=>{if(L)throw new Error("Cannot init lwp client more than once");L=new I(t,e)})(n.appName||"browser demo",o),A(),console.log("initLWPClient，调用了lwpConnect"),this.lwpClient=O(),this.lwpClient&&(this.ConnectionStatus=q.CONN_CONNECTED,this.lwpClient.addListener(I.EventsName.AuthStateChange,(function(e){return $(u,void 0,void 0,(function(){var n,o,u,s,a,c;return J(this,(function(f){switch(f.label){case 0:switch(console.log("AuthStateChange",e),this.AuthState=e,e){case h.INITED:return[3,1];case h.REFRESH_TOKEN:return[3,2];case h.SUBSCRIBE_FAILED:return[3,3];case h.SUBSCRIBED:return[3,14]}return[3,15];case 1:case 2:return this.ConnectionStatus=q.CONN_UNCONNECTED,[3,16];case 3:if(!(r<4&&i))return[3,12];r++,this.ConnectionStatus=q.CONN_AUTHING,f.label=4;case 4:return f.trys.push([4,10,,11]),[4,Tt.getSettingService().get().authTokenCallback()];case 5:n=f.sent(),f.label=6;case 6:return f.trys.push([6,8,,9]),Tt.getCloudVersion()&&(o=(0,z.get)(n,"uid",0)||t)&&(n.openId=o),n.accessToken?(n.openId||(n.openId=t||""),[4,j(n)]):(Tt.getLoggerService().error(X.ERROR,"authTokenCallback catch",n),[2]);case 7:return f.sent(),this.myUid=n.openId?n.openId+"":void 0,r=0,(u=null===(c=(0,z.get)(this.lwpClient,"getPaasDomain",null))||void 0===c?void 0:c.bind(this.lwpClient))&&(this.domain=u()||""),[3,9];case 8:return s=f.sent(),i=!(!s.body||"4000001"!==s.body.code||401!==s.code),Tt.getLoggerService().error(X.ERROR,"PaaS login catch",s),[3,9];case 9:return[3,11];case 10:return a=f.sent(),Tt.getLoggerService().error(X.ERROR,"authTokenCallback catch",a),this.ConnectionStatus=q.CONN_ERROR,[3,11];case 11:return[3,13];case 12:this.ConnectionStatus=q.CONN_ERROR,Tt.getLoggerService().error(X.ERROR,"PaaS login error"),f.label=13;case 13:return[3,16];case 14:return this.ConnectionStatus=q.CONN_AUTHED,[3,16];case 15:return[3,16];case 16:return[2]}}))}))})),this.lwpClient.addListener(I.EventsName.ConnectStateChange,(function(t){Tt.getEventService().emit(W.LWPConnectStateChange,t)})),Tt.getEventService().registerSyncPushHandler(this.lwpClient),a={sendMsg:this.sendMsg.bind(this)},V=a),[2]);var a}))}))},t.prototype.logout=function(){return this.lwpClient&&(this.lwpClient.clearAuthInfo(),console.log("调用了clearAuthInfo"),this.ConnectionStatus=q.CONN_UNCONNECTED),Promise.resolve()},t.prototype.kickout=function(){return Promise.resolve()},t.prototype.getMyOpenId=function(){return this.myUid},t.prototype.getDeviceId=function(t){var n="aui_paas_did",r="aui_paas_tab_id",i=Tt.getStorageService().get(n,!0),o=e.getItem(r);return(!i||i.indexOf("-")>0)&&(i=F().replace(/-/g,""),Tt.getStorageService().set(n,i,!0)),o||(o=Date.now()+"",e.setItem(r,o)),t?i:"".concat(i,"-").concat(o)},t.prototype.getDomain=function(){return this.domain},t}();!function(t){t.INFO="INFO",t.ERROR="ERROR"}(X||(X={}));var et,nt=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.info=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logFn||(this.logFn=Tt.getSettingService().get().log),(t=this.logFn).info.apply(t,e)},t.prototype.error=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logFn||(this.logFn=Tt.getSettingService().get().log),(t=this.logFn).error.apply(t,e)},t}(),rt={exports:{}},it="object"==typeof Reflect?Reflect:null,ot=it&&"function"==typeof it.apply?it.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};et=it&&"function"==typeof it.ownKeys?it.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var ut=Number.isNaN||function(t){return t!=t};function st(){st.init.call(this)}rt.exports=st,rt.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}yt(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&yt(t,"error",e,{once:!0})}(t,i)}))},st.EventEmitter=st,st.prototype._events=void 0,st.prototype._eventsCount=0,st.prototype._maxListeners=void 0;var at=10;function ct(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function ft(t){return void 0===t._maxListeners?st.defaultMaxListeners:t._maxListeners}function lt(t,e,n,r){var i,o,u,s;if(ct(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),u=o[e]),void 0===u)u=o[e]=n,++t._eventsCount;else if("function"==typeof u?u=o[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(i=ft(t))>0&&u.length>i&&!u.warned){u.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=u.length,s=a,console&&console.warn&&console.warn(s)}return t}function ht(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pt(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=ht.bind(r);return i.listener=n,r.wrapFn=i,i}function vt(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):dt(i,i.length)}function gt(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function dt(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function yt(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return at},set:function(t){if("number"!=typeof t||t<0||ut(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");at=t}}),st.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},st.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ut(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},st.prototype.getMaxListeners=function(){return ft(this)},st.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)ot(s,this,e);else{var a=s.length,c=dt(s,a);for(n=0;n<a;++n)ot(c[n],this,e)}return!0},st.prototype.addListener=function(t,e){return lt(this,t,e,!1)},st.prototype.on=st.prototype.addListener,st.prototype.prependListener=function(t,e){return lt(this,t,e,!0)},st.prototype.once=function(t,e){return ct(e),this.on(t,pt(this,t,e)),this},st.prototype.prependOnceListener=function(t,e){return ct(e),this.prependListener(t,pt(this,t,e)),this},st.prototype.removeListener=function(t,e){var n,r,i,o,u;if(ct(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){u=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,u||e)}return this},st.prototype.off=st.prototype.removeListener,st.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},st.prototype.listeners=function(t){return vt(this,t,!0)},st.prototype.rawListeners=function(t){return vt(this,t,!1)},st.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):gt.call(t,e)},st.prototype.listenerCount=gt,st.prototype.eventNames=function(){return this._eventsCount>0?et(this._events):[]};var _t,mt=rt.exports,wt=function(){function t(t,e){var n=this;this.syncHandlers={},this.topicName=t,e&&Object.keys(e).forEach((function(t){n.registerHandler(parseInt(t,10),e[t])})),this.handlePush=this.handlePush.bind(this)}return t.prototype.registerHandler=function(t,e){this.syncHandlers[t+""]=e},t.prototype.unRegisterHandler=function(t){delete this.syncHandlers[t+""]},t.prototype.handlePush=function(e){return $(this,void 0,void 0,(function(){var n,r=this;return J(this,(function(i){return n=e.body,setTimeout((function(){n.SyncPushPackage&&Array.isArray(n.SyncPushPackage.Data)&&n.SyncPushPackage.Data.forEach((function(e){var n=e.BizType,i=e.Data,o=e.ObjectType;if(i&&o&&n)try{var u="string"==typeof i?t.decodeJsonFromBase64(i):i,s=r.syncHandlers[o+""];s&&s(u)}catch(t){Tt.getLoggerService().error("error at decode64 ".concat(o),t)}}))}),0),[2,{code:200,headers:{},body:null}]}))}))},t.decodeJsonFromBase64=function(t){return JSON.parse(decodeURIComponent(Array.prototype.map.call(u(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))},t}(),bt=Object.values(W),St=[],Et=function(){function t(){this.emitter=new mt.EventEmitter}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.register=function(t){var e=this;return bt.forEach((function(n){e.emitter.addListener(n,t)})),function(){bt.forEach((function(n){e.emitter.removeListener(n,t)}))}},t.prototype.unRegister=function(){this.emitter.removeAllListeners()},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this.emitter).emit.apply(e,function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([t,t],n))},t.prototype.registerSyncPushHandler=function(e){var n=new wt("/s/para",{10001:function(e){try{t.subTypeEventsHandler(e)}catch(t){Tt.getLoggerService().error("error at pushHandler decode 10001",t)}return Promise.resolve()}}),r=new wt("/s/syncb",{7e4:function(e){try{t.subTypeEventsHandler(e)}catch(t){Tt.getLoggerService().error("error at pushHandler decode 70000",t)}return Promise.resolve()}});e.registerPushHandler(n.topicName,n.handlePush),e.registerPushHandler(r.topicName,r.handlePush)},t.subTypeEventsHandler=function(e){try{if("object"==typeof e&&e.length>0)for(var n in e)t.doEmitEvent(e[n]);else t.doEmitEvent(e)}catch(t){Tt.getLoggerService().error("error at subTypeEventsHandler of objectType 10001",t)}},t.doEmitEvent=function(t){var e=t.body,n=t.messageId,r="string"==typeof e?JSON.parse(e):e;if(11===r.type||!St.includes(n)){n&&(St.length<1e3||St.shift(),St.push(n));var i,o=r.type,u=r.roomId,s=r.senderId,a="";try{a="string"==typeof r.data?JSON.parse(r.data):r.data,i="string"==typeof r.senderInfo?JSON.parse(r.senderInfo):r.senderInfo}catch(t){a=r.data,i=r.senderInfo}var c={data:a,type:o,roomId:u,senderId:s,senderInfo:i,messageId:n};11!==o?Tt.getEventService().emit(W.PaaSOtherEvent,c):Tt.getEventService().emit(W.PaasACK,c)}},t}(),Ct=function(){function t(){this.setting={appKey:"",mediaHost:"https://static.dingtalk.com/media",deviceId:"",appLocale:"zh_CN",deviceLocale:"zh_CN",timeZone:"Asia/Shanghai",debug:!1,log:{error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,t)},info:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.info.apply(console,t)}},authTokenCallback:function(){return Promise.resolve({})}}}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.set=function(t){if(Tt.getCloudVersion()&&!t.wsUrl)throw new Error("缺少参数，需要传入 连接地址");this.setting=K(K({},this.setting),t)},t.prototype.get=function(){return this.setting},t}();!function(t){t.draft="aui_paas_sdk_conv_draft",t.localLog="aui_paas_sdk_localLog"}(_t||(_t={}));var It=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.get=function(t,e){try{var r=Tt.getAuthService().getMyOpenId(),i=e?t:"".concat(t,"_").concat(r);return n.getItem(i)||""}catch(t){return""}},t.prototype.set=function(t,e,r){try{var i=Tt.getAuthService().getMyOpenId(),o=r?t:"".concat(t,"_").concat(i);return n.setItem(o,e),!0}catch(t){return!1}},t}(),Lt=function(t,e){return void 0===e&&(e={}),Y("/r/IMMessageLwp/sendMessageToGroup",e,[t])},Ot=function(t,e){return void 0===e&&(e={}),Y("/r/IMMessageLwp/sendMessageToGroupUsers",e,[t])},At=function(t,e){return void 0===e&&(e={}),Y("/r/IMMessageLwp/listMessage",e,[t])},Nt=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.createGroup=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/createGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMCreateGroup]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.getGroup=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/getGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMGetGroup]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.closeGroup=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/closeGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMCloseGroup]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.joinGroup=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/joinGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMJoinGroup]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.leaveGroup=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/leaveGroup",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMLeaveGroup]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.listGroupUser=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/listGroupUser",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMListGroupUser]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.sendMessageToGroup=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,Lt(t)];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMSendMessageToGroup]",Tt.getLoggerService().error(n,e),n}}))}))},t.prototype.sendMessageToGroupUsers=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,Ot(t)];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMSendMessageToGroupUsers]",Tt.getLoggerService().error(n,e),n}}))}))},t.prototype.listMessage=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,At(t)];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [IMListMessage]",Tt.getLoggerService().error(n,e),n}}))}))},t.prototype.sendLike=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMMessageLwp/sendLike",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [sendLike]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.getGroupStatistics=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/getGroupStatistics",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [getGroupStatistics]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.getGroupUserByIdList=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMGroupLwp/getGroupUserByIdList",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [getGroupUserByIdList]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.muteAll=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMMessageControlLwp/muteAll",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [muteAll]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.cancelMuteAll=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMMessageControlLwp/cancelMuteAll",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [cancelMuteAll]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.muteUser=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMMessageControlLwp/muteUser",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [muteUser]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.cancelMuteUser=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMMessageControlLwp/cancelMuteUser",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [cancelMuteUser]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t.prototype.listMuteUsers=function(t){return $(this,void 0,void 0,(function(){var e,n;return J(this,(function(r){switch(r.label){case 0:return[4,(i=t,void 0===o&&(o={}),Y("/r/IMMessageControlLwp/listMuteUsers",o,[i]))];case 1:if(200===(e=r.sent()).code)return[2,e.body];throw n="response error at [listMuteUsers]",Tt.getLoggerService().error(n,e),n}var i,o}))}))},t}(),Tt=function(){function t(){this.isCloud=!0,this.appVersion="0.0.1"}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setCloudVersion=function(){this.isCloud=!0},t.prototype.setAppVersion=function(t){this.appVersion=t},t.prototype.getCloudVersion=function(){return this.isCloud},t.prototype.getAppVersion=function(){return this.appVersion},t.prototype.getAuthService=function(){return tt.getInstance()},t.prototype.getLoggerService=function(){return nt.getInstance()},t.prototype.getStorageService=function(){return It.getInstance()},t.prototype.getSettingService=function(){return Ct.getInstance()},t.prototype.getEventService=function(){return Et.getInstance()},t.prototype.getIMService=function(){return Nt.getInstance()},t}().getInstance();const jt=function(){function t(){this.isJoining=!1,this.joinedMap=new Map,this.imService=Tt.getIMService()}return t.prototype.checkGroupId=function(t,e){if(void 0===e&&(e=!0),!t||!t.groupId)return new Error("groupId is necessary");if(e){var n=t.groupId;if(!this.joinedMap.has(n))return new Error(n+" has not yet joined")}return null},t.prototype.rejoinGroups=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){return new Map(this.joinedMap).forEach((function(e,n){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.imService.joinGroup(r({groupId:n,broadCastType:0,broadCastStatistics:!1},e))];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))})),[2]}))}))},t.prototype.createGroup=function(t){return this.imService.createGroup(t||{})},t.prototype.getGroup=function(t){var e=this.checkGroupId(t,!1);return e?Promise.reject(e):this.imService.getGroup(t)},t.prototype.closeGroup=function(t){var e=this.checkGroupId(t,!1);return e?Promise.reject(e):this.imService.closeGroup(t)},t.prototype.joinGroup=function(t){var e=this,n=this.checkGroupId(t,!1);if(n)return Promise.reject(n);var r=t.groupId;if(this.joinedMap.has(r))return Promise.resolve({});var i={userNick:t.userNick,userAvatar:t.userAvatar,userExtension:t.userExtension};return this.imService.joinGroup(t).then((function(){e.joinedMap.set(r,i)}))},t.prototype.leaveGroup=function(t){var e=this,n=this.checkGroupId(t,!1);if(n)return Promise.reject(n);var r=t.groupId;return this.joinedMap.has(r)?this.imService.leaveGroup(t).then((function(){e.joinedMap.delete(r)})):Promise.resolve({})},t.prototype.listGroupUser=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.listGroupUser(t)},t.prototype.sendMessageToGroup=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.sendMessageToGroup(t)},t.prototype.sendMessageToGroupUsers=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.sendMessageToGroupUsers(t)},t.prototype.sendLike=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.sendLike(t)},t.prototype.listMessage=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.listMessage(t)},t.prototype.getGroupStatistics=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.getGroupStatistics(t)},t.prototype.getGroupUserByIdList=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):Array.isArray(t.userIdList)?this.imService.getGroupUserByIdList(t):Promise.reject(new Error("please check userIdList types"))},t.prototype.muteAll=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.muteAll(t)},t.prototype.cancelMuteAll=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.cancelMuteAll(t)},t.prototype.muteUser=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):Array.isArray(t.muteUserList)&&t.muteUserList.length?this.imService.muteUser(t):Promise.reject(new Error("muteUserList must be a non-empty array"))},t.prototype.cancelMuteUser=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):Array.isArray(t.cancelMuteUserList)&&t.cancelMuteUserList.length?this.imService.cancelMuteUser(t):Promise.reject(new Error("cancelMuteUserList must be a non-empty array"))},t.prototype.listMuteUsers=function(t){var e=this.checkGroupId(t);return e?Promise.reject(e):this.imService.listMuteUsers(t)},t}();var Ut=function(){function t(){this.handlerList={}}return t.prototype.emit=function(t,e){var n=this.handlerList[t];if(n)for(var r=0;r<n.length;r++)n[r](e)},t.prototype.on=function(t,e){var n;(null===(n=this.handlerList)||void 0===n?void 0:n.hasOwnProperty(t))||(this.handlerList[t]=[]),this.handlerList[t].push(e)},t.prototype.remove=function(t,e){if(e){var n=this.handlerList[t];if(n){var r=n.findIndex((function(t){return t===e}));r>-1&&(this.handlerList[t].splice(r,1),0===this.handlerList[t].length&&delete this.handlerList[t])}}else delete this.handlerList[t]},t.prototype.removeAllEvents=function(){this.handlerList={}},t.prototype.addEventListener=function(t,e){this.emit(t,e)},t}();const xt=Ut;function Mt(t){return"string"==typeof t&&!!t}var Rt;!function(t){t.Message="message"}(Rt||(Rt={}));var kt=function(e){function n(){var t=e.call(this)||this;return t.isLogging=!1,t.isLogged=!1,t.reconnecting=!1,t.actionQueue=new Set,t.authService=Tt.getAuthService(),t.settingService=Tt.getSettingService(),t.eventService=Tt.getEventService(),t.imService=new jt,t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n.create=function(){return new n},Object.defineProperty(n.prototype,"authState",{get:function(){return this.authService.lwpClient.authState},enumerable:!1,configurable:!0}),n.getDeviceId=function(){return Tt.getAuthService().getDeviceId()},n.prototype.checkConnectionWithTimer=function(){var t=this;this.checkConnectionStatusTimer=setTimeout((function(){4!==t.authState&&t.isLogged&&t.reconnect(),clearTimeout(t.checkConnectionStatusTimer),t.isLogged&&t.checkConnectionWithTimer()}),6e3)},n.prototype.reconnect=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:if(console.log("try reconnect"),this.reconnecting||!this.isLogged)return[2];if(this.isLogging)return[2,Promise.reject(new Error("Is Logging In"))];this.reconnecting=!0,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,this.doAuth(this.authToken)];case 2:return e.sent(),console.log("reconnect success"),[4,this.imService.rejoinGroups()];case 3:return e.sent(),this.reconnecting=!1,this.excuteActionCache(),[3,5];case 4:return t=e.sent(),console.error("reconnect fail",t),this.reconnecting=!1,this.reconnect(),[3,5];case 5:return[2]}}))}))},n.prototype.auth=function(t){if(this.isLogging)return Promise.reject(new Error("Is logining in"));try{var e=function(t){var e=JSON.parse(decodeURIComponent(Array.prototype.map.call(a.atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")));if(!Array.isArray(e.endpoints)||!Mt(e.endpoints[0])||!Mt(e.token))throw new Error("base64token format error");return e}(t);return this.authToken=e,console.log("AuthTokenObject--\x3e",e),this.doAuth(e)}catch(t){return Promise.reject(new Error("parse token error! "+t.message))}},n.prototype.doAuth=function(t){var e=this;return this.unRegisterCb&&this.unRegisterCb(),this.authService.lwpClient&&this.authService.lwpClient.wsInstance&&this.authService.lwpClient.wsInstance.close(),new Promise((function(r,i){var o={mediaHost:"",appKey:t.appId||"aliyun-interaction-sdk",appName:"aliyun-interaction-sdk",deviceId:n.getDeviceId(),debug:!0,wsUrl:t.endpoints[0],log:{error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error(t)},info:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.info(t)}},authTokenCallback:function(){return Promise.resolve({accessToken:t.token})}};e.settingService.set(o),e.authService.login().then((function(){e.unRegisterCb=e.eventService.register((function(t,n){if(t===W.PaaSConnectionChanged)return n===q.CONN_AUTHED?(e.isLogged=!0,r("success"),e.checkConnectionWithTimer()):n===q.CONN_ERROR&&i(new Error("connect fail")),void(e.isLogging=!1);t===W.PaaSAuthStateChanged&&(2===n?i(new Error("auth fail")):0===n&&e.isLogged&&e.reconnect()),t===W.PaaSOtherEvent&&e.handlePaaSOtherEvent(n),"LWPConnectStateChange"===t&&e.isLogged&&!e.reconnecting&&[1,2].includes(n)&&e.reconnect()}))})).catch((function(t){e.isLogged=!1,e.isLogging=!1,i(t)}))}))},n.prototype.handlePaaSOtherEvent=function(t){var e=t.roomId,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["roomId"]),i=r({groupId:e},n);this.emit(Rt.Message,i)},n.prototype.excuteActionCache=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i,u,s,a;return o(this,(function(o){switch(o.label){case 0:if(!this.actionQueue.size)return[3,6];if(!(t=this.actionQueue.values().next().value))return[3,5];e=t.api,n=t.options,r=t.resolve,i=t.reject,(u=t.timer)&&clearTimeout(u),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.imService[e](n)];case 2:return s=o.sent(),r(s),[3,4];case 3:return a=o.sent(),i(a),[3,4];case 4:this.actionQueue.delete(t),o.label=5;case 5:return[3,0];case 6:return[2]}}))}))},n.prototype.excuteApi=function(t,e){var n=this;return this.isLogged?this.reconnecting||0!==this.actionQueue.size?new Promise((function(r,i){var o={resolve:r,reject:i,api:t,options:e};n.actionQueue.add(o);var u=setTimeout((function(){n.actionQueue.delete(o),o.reject(new Error("Services reconnecting"))}),1e4);o.timer=u})):this.imService[t](e):Promise.reject(new Error("Please login first"))},n.prototype.clearActionCache=function(){for(;this.actionQueue.size;){var t=this.actionQueue.values().next().value;t&&(t.timer&&clearTimeout(t.timer),this.actionQueue.delete(t))}},n.prototype.logout=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.isLogged=!1,this.reconnecting=!1,this.clearActionCache(),[4,this.authService.logout()];case 1:return t.sent(),this.authService.lwpClient&&this.authService.lwpClient.wsInstance&&this.authService.lwpClient.wsInstance.close(),Tt.getEventService().unRegister(),[2]}}))}))},n.prototype.createGroup=function(t){return this.excuteApi("createGroup",t)},n.prototype.getGroup=function(t){return this.excuteApi("getGroup",t)},n.prototype.closeGroup=function(t){return this.excuteApi("closeGroup",t)},n.prototype.joinGroup=function(t){return this.excuteApi("joinGroup",t)},n.prototype.leaveGroup=function(t){return this.isLogged?this.imService.leaveGroup(t):Promise.resolve({})},n.prototype.listGroupUser=function(t){return this.excuteApi("listGroupUser",t)},n.prototype.sendMessageToGroup=function(t){return this.excuteApi("sendMessageToGroup",t)},n.prototype.sendMessageToGroupUsers=function(t){return this.excuteApi("sendMessageToGroupUsers",t)},n.prototype.sendLike=function(t){return this.excuteApi("sendLike",t)},n.prototype.listMessage=function(t){return this.excuteApi("listMessage",t)},n.prototype.getGroupStatistics=function(t){return this.excuteApi("getGroupStatistics",t)},n.prototype.getGroupUserByIdList=function(t){return this.excuteApi("getGroupUserByIdList",t)},n.prototype.muteAll=function(t){return this.excuteApi("muteAll",t)},n.prototype.cancelMuteAll=function(t){return this.excuteApi("cancelMuteAll",t)},n.prototype.muteUser=function(t){return this.excuteApi("muteUser",t)},n.prototype.cancelMuteUser=function(t){return this.excuteApi("cancelMuteUser",t)},n.prototype.listMuteUsers=function(t){return this.excuteApi("listMuteUsers",t)},n}(xt);const Pt=kt;var Dt,Gt;!function(t){t[t.PaaSLikeInfo=1001]="PaaSLikeInfo",t[t.PaaSUserJoin=1002]="PaaSUserJoin",t[t.PaaSUserLeave=1003]="PaaSUserLeave",t[t.PaaSMuteGroup=1004]="PaaSMuteGroup",t[t.PaaSCancelMuteGroup=1005]="PaaSCancelMuteGroup",t[t.PaaSMuteUser=1006]="PaaSMuteUser",t[t.PaaSCancelMuteUser=1007]="PaaSCancelMuteUser"}(Dt||(Dt={})),function(t){t[t.nobody=0]="nobody",t[t.somebody=1]="somebody",t[t.all=2]="all"}(Gt||(Gt={}))})();var d=g.n6,y=g.bJ,_=g.hD;export{d as InteractionEngine,y as InteractionEventNames,_ as InteractionMessageTypes};